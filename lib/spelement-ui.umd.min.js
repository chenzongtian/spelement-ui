(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["spelement-ui"]=e():t["spelement-ui"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"0f5d":function(t,e,i){"use strict";i("47ba")},1148:function(t,e,i){"use strict";i("cc71")},"333a":function(t,e,i){},"45f9":function(t,e,i){"use strict";i("bdff")},"47ba":function(t,e,i){},"4a38":function(t,e){t.exports="data:image/png;base64,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"},5919:function(t,e,i){"use strict";i("f90f")},6800:function(t,e,i){},"718d":function(t,e,i){"use strict";i("7546")},7546:function(t,e,i){},"7f02":function(t,e,i){},8875:function(t,e,i){var n,o,a;(function(i,l){o=[],n=l,a="function"===typeof n?n.apply(e,o):n,void 0===a||(t.exports=a)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var i,n,o,a=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,r=a.exec(h.stack)||l.exec(h.stack),s=r&&r[1]||!1,c=r&&r[2]||!1,p=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");s===p&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=i.replace(n,"$1").trim());for(var d=0;d<u.length;d++){if("interactive"===u[d].readyState)return u[d];if(u[d].src===s)return u[d];if(s===p&&u[d].innerHTML&&u[d].innerHTML.trim()===o)return u[d]}return null}}return t}))},"897e":function(t,e){t.exports="data:image/png;base64,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"},a6ea:function(t,e,i){"use strict";i("7f02")},bbfb:function(t,e,i){"use strict";i("cb49")},bdff:function(t,e,i){},cb49:function(t,e,i){},cc71:function(t,e,i){},e810:function(t,e,i){"use strict";i("333a")},f90f:function(t,e,i){},fb15:function(t,e,i){"use strict";if(i.r(e),"undefined"!==typeof window){var n=window.document.currentScript,o=i("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var a=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);a&&(i.p=a[1])}var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-form",class:{"sp-form-search":"search"===t.type}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-position":t.spOption.labelPosition,"label-suffix":t.spOption.labelSuffix,"label-width":t.spOption.labelWidth},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),t.onSubmit(!0))}}},[i("el-row",[t._l(t.spFormList,(function(e,n){return[t.displayMap[e.prop]?i("el-col",{key:n,attrs:{span:e.span}},["slot"===e.component?i("el-form-item",t._b({class:{"el-viewform-item":"view"===t.type}},"el-form-item",e.elFormItem,!1),[[t._t(e.prop,null,null,t.form)]],2):i("sp-form-item",{attrs:{component:e.component,type:t.type,prop:e.prop,"el-form-item":e.elFormItem,"el-props":e.elProps,disabled:t.disabledMap[e.prop],options:t.formItemOptions[e.prop],loading:t.remoteLoadingMap[e.prop]},on:{change:function(i){return t.onChange(i,e.component,e.prop)}},model:{value:t.form[e.prop],callback:function(i){t.$set(t.form,e.prop,i)},expression:"form[formItem.prop]"}})],1):t._e()]}))],2),i("el-row",[i("el-col",{attrs:{span:24}},["form"===t.type?i("div",{staticClass:"sp-handler-bar",style:{textAlign:"right"}},[t.spOption.submitBtn?i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onSubmit}},[t._v(t._s(t.spOption.submitBtnTxt))]):t._e(),t.spOption.clearBtn?i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:t.onClear}},[t._v(t._s(t.spOption.clearBtnTxt))]):t._e(),t.spOption.cancelBtn?i("el-button",{attrs:{icon:"el-icon-close"},on:{click:t.onCancel}},[t._v(t._s(t.spOption.cancelBtnTxt))]):t._e(),t._t("formHandle")],2):"search"===t.type?i("div",{staticClass:"sp-handler-bar",style:{textAlign:"right"}},[t.spOption.submitBtn?i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSubmit}},[t._v(t._s(t.spOption.searchBtnTxt))]):t._e(),t.spOption.resetBtn?i("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:t.onReset}},[t._v(t._s(t.spOption.resetBtnTxt))]):t._e(),t.spOption.cancelBtn?i("el-button",{attrs:{icon:"el-icon-close"},on:{click:t.onCancel}},[t._v(t._s(t.spOption.cancelBtnText))]):t._e(),t._t("formHandle")],2):t._e()])],1)],1)],1)},r=[];const s=t=>{if(!t||"object"!==typeof t)return t;if(Array.isArray(t))return t.map(t=>s(t));const e={};for(const i in t)t[i]&&"object"===typeof t[i]?e[i]=s(t[i]):e[i]=t[i];return e};function c(t){return!h(t)||("string"===typeof t&&0===t.trim().length||(!(!Array.isArray(t)||0!==t.length)||t instanceof Object&&0===Object.keys(t).length))}function p(t,e){let i=null;return i=Array.isArray(e)?e.map(e=>{const i=u(t,e);return c(i)?e:i}).join(","):u(t,e),c(i)?e:i}function u(t,e){if(!Array.isArray(t)||c(e))return e;const i=t.find(t=>!c(t.value)&&t.value.toString()===e.toString());if(i)return i.label;{const i=t.filter(t=>Array.isArray(t.children)).reduce((t,e)=>t.concat(e.children),[]);if(i.length>0)return u(i,e)}return null}function d(t,e){if(t===e||Object.is(t,e))return!0;if(typeof t!=typeof e||"object"!==typeof t||"object"!==typeof e)return String(t)===String(e);if(Array.isArray(t)&&t.length!==e.length)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!d(t[i],e[i]))return!1;return!0}function h(t){return void 0!==t&&null!==t}function m(t){return!h(t)||isNaN(t)?null:Number(t)}const f={submitBtn:"boolean",submitBtnTxt:"string",clearBtn:"boolean",clearBtnTxt:"string",cancelBtn:"boolean",cancelBtnTxt:"string",searchBtn:"boolean",searchBtnTxt:"string",resetBtn:"boolean",resetBtnTxt:"string",uploadAction:"string",uploadHeaders:"object",column:"array",annotate:"string",custAble:"boolean"},b={editBtn:"boolean",viewBtn:"boolean",delBtn:"boolean",showRowAction:"boolean",rowActionWidth:"number",expand:"boolean",column:"array",annotate:"string",custAble:"boolean"},g={addBtn:"boolean",searchBtn:"boolean",columnBtn:"boolean",refreshBtn:"boolean",showSearchForm:"boolean",showTbMenu:"boolean",showSptable:"boolean",editDialogWidth:"number",addDialogWidth:"number",annotate:"string",custAble:"boolean"},y={searchBtn:"boolean",columnBtn:"boolean",refreshBtn:"boolean",showSearchForm:"boolean",showTbMenu:"boolean",showSptable:"boolean",editDialogWidth:"number",addDialogWidth:"number",annotate:"string",custAble:"boolean"},A={options:["array","function","object"],slot:"boolean",defaultValue:["string","number"],defaultSelectIndex:"number",startValueProp:"string",endValueProp:"string",display:["boolean","function"],disabled:["boolean","function"],asyncValue:"object"},v={options:["array","function","object"],slot:"boolean",format:"function",hide:"boolean"},w={...A,...v,cellLabel:"string",search:"boolean",searchIndex:"number",searchSpan:"number",searchLabelWidth:"number",addAble:"boolean",addType:"string",addRules:["object","array"],editAble:"boolean",editType:"string",editRules:["object","array"]},x={...A,...v,required:"boolean",tableEdit:"boolean"},C={annotate:null,addBtn:!1,searchBtn:!0,columnBtn:!0,refreshBtn:!0,showSearchForm:!1,showTbMenu:!0,editDialogWidth:"80%",addDialogWidth:"80%",column:[]},D={editBtn:!1,viewBtn:!1,delBtn:!1,selection:!0,expand:!1,showRowAction:!1,rowActionWidth:null,column:[]},T=(t,e)=>{if(c(e)||c(t))return t;const i={};for(const n in t)e[n]||(i[n]=t[n]);return i},S=t=>T(t,{...g,...b}),O=t=>T(t,{...g,...f}),k=t=>T(t,{...y,...f}),B={...w,...A,...v,...x,custAble:"boolean",custOptionId:"string",children:"array",sort:"number"},_=(t={})=>T(t,{...B,labelWidth:"string",rules:"any"}),E=(t={})=>T(t,{...B,type:"string",remoteMethod:"function"}),F=(t={})=>T(t,{...f,column:"array"}),V=(t={})=>T(t,{...b,column:"array"}),M=(t={})=>T(t,{...B,rules:"array",remoteMethod:"function"}),$=t=>{let e=[];return Array.isArray(t.column)&&t.column.length>0?(t.column.forEach(t=>{if(Array.isArray(t.children)&&t.children.length>0){const i=$({column:t.children});e=e.concat(i)}else e.push(t)}),e):[]},P=t=>{const e=t.type||"input";return-1!==e.search("range")||"select"===e&&t.multiple||"checkbox"===e},R=t=>t&&t.watch&&"function"===typeof t.method,I=t=>["select","radio","checkbox"].includes(t),L=(t="input")=>{const e={uploadimg:["elupload","uploadimg"],input:["input","textarea","password","tel","number"],datepicker:["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"]};for(const i in e)if(e[i].includes(t))return i;return t},z=(t,e)=>{let i=t.defaultValue;if("number"===typeof t.defaultSelectIndex){const n=Array.isArray(e)?e:Array.isArray(t.options)?t.options:[],o=n[t.defaultSelectIndex];i=o?o.value:i}return i},H=(t,e={},i=!0,n)=>{const o=i?z(t,n):"";let a=e[t.prop];t.startValueProp&&t.endValueProp&&!c(e[t.startValueProp])&&!c(e[t.endValueProp])&&(a=[e[t.startValueProp],e[t.endValueProp]]),a=c(a)?o:a;const l=P(t);return l&&!Array.isArray(a)&&("number"===typeof a&&(a=a.toString()),a="string"===typeof a&&a.trim().length>0?a.split(","):null),a},j=(t={},e=[],i={})=>{const n={};return e.forEach(e=>{n[e.prop]=H(e,t,!0,i[e.prop])}),n},U=(t,e,i={},n=!1)=>{const o={},a=e.filter(t=>t.endValueProp&&t.startValueProp),l={};a.forEach(e=>{t[e.startValueProp]||t[e.endValueProp]?l[e.prop]=[t[e.startValueProp],t[e.endValueProp]]:l[e.prop]=""});const r={...t,...l};for(const s in r){const t=e.find(t=>t.prop===s);if(t)if(Array.isArray(t.children)){const e=U(r,t.children,i,n);Object.assign(o,e)}else{const e=!1===t.clearable&&n;o[s]=H(t,r,e,i[s])}}return o},N=(t,e,i)=>{const n={};for(const o in t){const a=e.find(t=>t.prop===o);if(a){let e=t[o];if("object"===typeof e&&(e=s(e)),Array.isArray(e)&&a&&a.startValueProp&&a.endValueProp?(n[a.startValueProp]=e[0],n[a.endValueProp]=e[1]):a.multiple&&"function"===typeof a.valueFormat?n[o]=a.valueFormat(e):n[o]=e,I(a.type)){let t="";t=Array.isArray(e)?e.map(t=>p(i[o],t)):p(i[o],e),n["$"+o]=t}}}return n},K=(t,e,i)=>{const n={};for(const o in t)if(Array.isArray(i[o]))n[o]=p(i[o],t[o]);else{const a=e.find(t=>t.prop===o);if(a){let e=null;R(a.options)?e=at(a,t):"function"===typeof a.remoteMethod&&(e=a.prop+"_"+t[o]),e&&Array.isArray(i[e])?n[o]=p(i[e],t[o]):"function"===typeof a.format?n[o]=a.format(t[o]):n[o]=t[o]}else n[o]=t[o]}return n},W=(t,e={})=>{const i=$(e);return Array.isArray(t)&&t.length>0&&i.length>0?new Promise(n=>{ot(t,i).then(o=>{const a=t.map(t=>{const n=K(t,i,o);return"function"===typeof e.rowEditDisabled&&(n.editDisabled=e.rowEditDisabled(t)),"function"===typeof e.rowDelDisabled&&(n.delDisabled=e.rowDelDisabled(t)),"function"===typeof e.rowViewDisabled&&(n.viewDisabled=e.rowViewDisabled(t)),n});n(a)})}):Promise.resolve([])},Q=(t,e={})=>{const i=Array.isArray(e.column)?e.column:[];if(Array.isArray(t)&&t.length>0&&i.length>0){const e=i.filter(t=>!1===t.tableEdit),n=i.filter(t=>!1!==t.tableEdit),o=i.reduce((t,e)=>(t[e.prop]=e,t),{});return new Promise(a=>{ot(t,i).then(i=>{const l={},r=s(t),c=t.map(t=>{if(t.id)for(const e in t)o[e]&&"function"===typeof o[e].disabled&&(l[e+t.id]=o[e].disabled(t,r));const a=K(t,e,i),s=U(t,n,i);return{...a,...s}});a({tableData:c,disabledMap:l,optionsMap:i})})})}return new Promise(e=>{ot(t,i).then(t=>{e({tableData:[],disabledMap:{},optionsMap:t})})})},Y=(t,e,i)=>{if(!R(e))return;let n=e.watch;Array.isArray(n)||(n=[e.watch]),n.forEach(n=>{i[n]||(i[n]={}),i[n][t]=e.method})},q=(t,e={},i={},n={})=>{t&&I(t.type)&&(e[t.prop]=Array.isArray(t.options)?t.options:[],"function"===typeof t.options?i[t.prop]=t.options():R(t.options)&&Y(t.prop,t.options,n),Array.isArray(t.children)&&t.children.length>0&&t.children.forEach(t=>{q(t,e,i,n)}))},G=(t,e={},i={},n={})=>{i[t.prop]=!1!==t.display,"function"===typeof t.display?i[t.prop]=t.display(s(e)):R(t.display)&&Y(t.prop,t.display,n)},X=(t,e={},i={},n={},o)=>{i[t.prop]=!0===t.disabled||"view"===o,"function"===typeof t.disabled?i[t.prop]=t.disabled(s(e)):R(t.disabled)&&Y(t.prop,t.disabled,n)},J=(t,e)=>{const i=_(e),n=L(e.type);return i.clearable=!1!==i.clearable,c(e.placeholder)&&(i.placeholder=["input","sptextarea"].includes(n)?"请输入"+e.label:"请选择"+e.label),e.type&&-1!==e.type.search("range")&&(i.unlinkPanels=!1!==e.unlinkPanels),"elupload"===e.type&&(c(t.uploadAction)||(i.action=t.uploadAction),c(t.uploadHeaders)||(i.headers=t.uploadHeaders)),i},Z=(t,e)=>{const i=E(e),n=e.labelWidth||t.labelWidth;return i.labelWidth="number"===typeof n?n+"px":n,i},tt=(t={},e)=>{const i=M(e);return i.align=i.align||t.align||"center",i.label=e.cellLabel||e.label,i},et=(t={})=>{const e=Array.isArray(t.column)?t.column:[];return e.filter(t=>!0!==t.hide).map(e=>{const i=Array.isArray(e.children)?et({...t,column:e.children}):null,n=tt(t,e);return{prop:e.prop,label:e.label,type:e.slot?"slot":e.type,elProps:n,children:i}})},it=t=>{const e={};for(const i in t){const n=t[i];if(n)for(const t in n)e[t]||"function"!==typeof n[t]||(e[t]=n[t])}return e},nt=t=>{if(c(t))return Promise.resolve({});const e=Object.values(t),i=Object.keys(t),n={};return new Promise(t=>{Promise.all(e).then(e=>{e.forEach((t,e)=>{const o=i[e];n[o]=t}),t(n)}).catch(()=>{t(n)})})},ot=(t={},e=[])=>{const i=e.filter(t=>Array.isArray(t.options)),n=e.filter(t=>"function"===typeof t.remoteMethod),o=e.filter(t=>"function"===typeof t.options),a=e.filter(t=>R(t.options)),l={};return i.forEach(t=>{l[t.prop]=t.options}),Array.isArray(t)&&t.length>0?(o.forEach(e=>{l[e.prop]=e.options(t[0])}),n.forEach(e=>{t.forEach(t=>{let i=t[e.prop];i=c(i)||Array.isArray(i)?null:e.prop+"_"+i,i&&!l[i]&&(l[i]=e.remoteMethod(t[e.prop],t))})}),a.forEach(e=>{t.forEach(t=>{const i=at(e,t);if(i&&!l[i]){const n=lt(e.options,t,{}),o=s(t);l[i]=e.options.method(o,null,n)}})})):(o.forEach(e=>{l[e.prop]=e.options(t)}),n.forEach(e=>{l[e.prop]=e.remoteMethod(t[e.prop],t)}),a.forEach(e=>{const i=lt(e.options,t,{}),n=s(t);l[e.prop]=e.options.method(n,null,i)})),nt(l)},at=(t={},e={})=>{if(R(t.options)){let i=t.options.watch;if(i=Array.isArray(i)?i:"string"===typeof i?[i]:[],i.length>0){const n=i.reduce((t,i)=>c(e[i])||Array.isArray(e[i])?t:t+"_"+e[i],"");if(n)return t.prop+n}}return null},lt=(t={},e,i)=>{let n={};if(R(t)){let o=t.watch;return o=Array.isArray(o)?o:[o],o.forEach(t=>{if(null===e[t]||void 0===e[t])n[t]=null;else{const o=Array.isArray(i[t])?i[t]:[];if(Array.isArray(e[t])){const i=o.filter(i=>!c(i.value)&&e[t].includes(i.value));n[t]=0===i.length?e[t]:i}else{const i=o.find(i=>!c(i.value)&&i.value.toString()===e[t].toString());n[t]=i||e[t]}}}),n}return n},rt=(t,e={},i="options",n={},o=[],a={})=>{let l=null;if(l="string"===typeof t?n[t]:it(n),!c(l)){const n={};for(const r in l)if("function"===typeof l[r]){const c=s(e),p=o.find(t=>t.prop===r),u=lt(p[i],c,a),d=l[r](c,t,u);n[r]="disabled"===i?!!d:d}return n}},st=t=>(t&&Array.isArray(t.column)&&t.column.length>0&&t.column.forEach(t=>{if(Array.isArray(t.children)&&t.children.length>0&&!isNaN(t.width)){const e=Number(t.width)/t.children.length;t.children.forEach(t=>{t.width=e})}}),t),ct={labelWidth:"80px",labelSuffix:"",labelPosition:"right",cancelBtn:!1,clearBtn:!0,submitBtn:!0,resetBtn:!0,resetBtnTxt:"重置",submitBtnTxt:"提交",searchBtnTxt:"搜索",cancelBtnTxt:"取消",clearBtnTxt:"清空"};var pt={data(){return{spFormList:[],spOption:{},form:{},allForm:{},unClearForm:{},remoteLoadingMap:{},formItemOptions:{},watchFormItemOptions:{},displayMap:{},watchDisplayMap:{},disabledMap:{},watchDisabledMap:{},asyncValueMap:{},ignoreForm:{}}},methods:{init(t,e){if(!t||!Array.isArray(t.column))return{};const i=[],n=[],o={},a={},l={},r={},s={},c={},p={},u={},d={},h={};t.column.forEach(m=>{const f=m.formType||m.type,b=L(f),g=m.prop,y=J(t,m);"function"===typeof m.remoteMethod&&(s[g]=!1,y.filterable=!0,y.remote=!0,y.defaultFirstOption=!1!==m.defaultFirstOption,y.remoteMethod=this.packRemoteMethod(m.remoteMethod,m.prop,this.data));const A=Z(t,m);m.rules&&(A.rules=this.packRules(m.rules));const v={prop:g,label:m.label,component:b,span:m.span||24,tip:m.tip,elProps:y,elFormItem:A};i.push(v),h[g]=I(m.type)?[]:"",(m.disabled||!1===m.canClear)&&n.push(m.prop),q(m,c,p,u),G(m,this.data,o,a),X(m,this.data,l,r,e),R(m.asyncValue)&&Y(m.prop,m.asyncValue,d)});const m=F(t);this.spOption={...ct,...m},this.spFormList=i,this.displayMap=o,this.watchDisplayMap=a,this.watchDisabledMap=r,this.disabledMap=l,this.remoteLoadingMap=s,this.asyncValueMap=d,this.formItemOptions=c,this.watchFormItemOptions=u,this.allForm=h,ot(this.data,this.option.column).then(t=>{this.formItemOptions={...this.formItemOptions,...t};const e=j(this.data,this.option.column,this.formItemOptions);this.form=e,this.allForm={...e};const i={};n.forEach(t=>{i[t]=e[t]}),this.unClearForm=i;const o=N(e,this.option.column,this.formItemOptions);this.watchDataChange(null,e),this.$nextTick(()=>{this.$refs.form.clearValidate()}),this.$emit("init-data",o)})},watchDataChange(t,e){this.formItemOptionsWatch(t,e),this.valueWatch(t,e),this.disabledWatch(t,e),this.displayWatch(t,e)},formItemOptionsWatch(t,e){let i=null;i=t?this.watchFormItemOptions[t]:it(this.watchFormItemOptions);const n={};for(const o in i){const a=s(e),l=this.option.column.find(t=>t.prop===o),r=lt(l.options,e,this.formItemOptions);n[o]=i[o](a,t,r)}nt(n).then(e=>{if(t)for(const t in e){const i=this.form[t];let n=null;Array.isArray(i)&&i.length>0?n=i.filter(i=>("string"===typeof i||"number"===typeof i)&&e[t].some(t=>t.value===i)):"string"!==typeof i&&"number"!==typeof i||e[t].some(t=>t.value===i)&&(n=i),n!==i&&this.$set(this.form,t,n)}this.formItemOptions={...this.formItemOptions,...e}})},valueWatch(t,e){const i=rt(t,e,"asyncValue",this.asyncValueMap,this.option.column,this.formItemOptions);c(i)||(this.form={...this.form,...i})},displayWatch(t,e){const i=rt(t,e,"display",this.watchDisplayMap,this.option.column,this.formItemOptions);this.displayMap={...this.displayMap,...i}},disabledWatch(t,e){const i=rt(t,e,"disabled",this.watchDisabledMap,this.option.column,this.formItemOptions);this.disabledMap={...this.disabledMap,...i}},packRemoteMethod(t,e,i){const n=this;return function(o){n.$set(n.remoteLoadingMap,e,!0);const a=c(n.form)?i:n.form;t(o,a).then(t=>{n.$set(n.formItemOptions,e,t),n.$set(n.remoteLoadingMap,e,!1)})}},packRuleValidator(t){const e=this;return function(i,n,o){t(i,n,o,e.form,e.data)}},packRules(t){return t?(t=Array.isArray(t)?t:[t],t.map(t=>{const e={...t};return"function"===typeof e.validator&&(e.validator=this.packRuleValidator(e.validator)),e})):null},toggleDisplay(t,e,i){const n={};if(Array.isArray(e)){const o={};e.forEach(e=>{n[e]=!0===t,o[e]=i}),this.ignoreForm=o}else for(const o in this.displayMap)n[o]="boolean"===typeof t?t:!this.displayMap[o];this.displayMap={...this.displayMap,...n}}}},ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form-item",t._b({class:{"el-viewform-item":"view"===t.type},attrs:{label:t.label||t.elFormItem.label,prop:t.prop||t.elFormItem.prop}},"el-form-item",t.elFormItem,!1),["input"===t.component?i("el-input",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-input",t.elProps,!1)):"sptextarea"===t.component?i("sp-textarea",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"sp-textarea",t.elProps,!1)):t._e(),"switch"===t.component?i("el-switch",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-switch",t.elProps,!1)):"select"===t.component?i("el-select",t._b({attrs:{disabled:t.disabled,loading:t.loading,"remote-method":t.remoteMethod||t.elProps.remoteMethod},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-select",t.elProps,!1),t._l(t.options,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}})})),1):"checkbox"===t.component?i("el-checkbox-group",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-checkbox-group",t.elProps,!1),t._l(t.options,(function(e){return i("el-checkbox",{key:e.value,attrs:{disabled:e.disabled,label:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1):"radio"===t.component?i("el-radio-group",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-radio-group",t.elProps,!1),t._l(t.options,(function(e){return i("el-radio",{key:e.value,attrs:{label:e.value,disabled:e.disabled}},[t._v(" "+t._s(e.label)+" ")])})),1):"datepicker"===t.component?i("el-date-picker",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-date-picker",t.elProps,!1)):"time"===t.component?i("el-time-select",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-time-select",t.elProps,!1)):"inputNumber"===t.component?i("el-input-number",t._b({attrs:{disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-input-number",t.elProps,!1)):"cascader"===t.component?i("el-cascader",t._b({attrs:{disabled:t.disabled,options:t.options},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"el-cascader",t.elProps,!1)):"upload"===t.component?i("sp-upload",{attrs:{action:t.uploadAction,limit:2},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}}):"uploadimg"===t.component?["view"!==t.type?i("sp-upload-img",{attrs:{"el-props":t.elProps},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}}):i("ul",{staticClass:"el-upload-list el-upload-list--picture-card"},t._l(t.curValue,(function(e){return i("li",{key:e,staticClass:"el-upload-list__item is-success"},[i("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e,"preview-src-list":t.curValue}})],1)})),0)]:"treeselect"===t.component?i("sp-tree-select",t._b({attrs:{options:t.options,disabled:t.disabled},on:{change:t.onChange},model:{value:t.curValue,callback:function(e){t.curValue=e},expression:"curValue"}},"sp-tree-select",t.elProps,!1)):t._e(),t.tip?i("p",{staticClass:"sp-form-tip"},[t._v(t._s(t.tip))]):t._e()],2)},dt=[],ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-wrap",class:{uploaded:t.fileUrl.length>0},staticStyle:{display:"inline-block"}},[t.fileUrl?i("el-image",{ref:"elImage",staticClass:"el-image",staticStyle:{width:"160px",height:"160px"},attrs:{src:t.fileUrl,fit:"contain","preview-src-list":[t.fileUrl]}}):t._e(),i("div",{staticClass:"mask"},[t.fileUrl?i("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:t.onDelete}},[t._v("删除")]):t._e(),t.fileUrl?i("el-button",{staticClass:"mask-btn",attrs:{type:"text",icon:"el-icon-view"},on:{click:t.onView}},[t._v("预览")]):t._e(),i("el-upload",{ref:"upload",staticClass:"el-upload",attrs:{"show-file-list":t.showFileList,action:t.action,headers:t.headers,limit:t.limit,disabled:t.disabled,accept:t.accept,"on-success":t.onSuccess,"on-error":t.onError,"on-remove":t.onRemove,"before-upload":t.onBeforeUpload,"auto-upload":t.autoUpload}},[i("el-button",{attrs:{type:"text",icon:"el-icon-upload"}},[t._v("上传")])],1)],1)],1)},mt=[],ft={name:"sp-upload",props:{action:{type:String,default:""},value:{type:String,default:""},limit:{type:Number,default:1},autoUpload:{type:Boolean,default:!0},accept:{type:String,default:"image/png, image/jpeg"},showFileList:{type:Boolean,default:!1},maxSize:{type:[String,Number],default:"3M"},loadingText:{type:String,default:"上传中..."},disabledText:{type:String,default:""}},data(){return{uploading:!1,fileList:[],fileUrl:""}},computed:{disabled:function(){return this.fileList.length>=this.limit||this.uploading},maxSizeByte:function(){const t=this.maxSize;if("number"===typeof t)return t;const e=parseFloat(t);return isNaN(e)?3145728:/\d+(\.\d+)?[G,g]/.test(t)?1024*e*1024*1024:/\d+(\.\d+)?[M,m]/.test(t)?1024*e*1024:/\d+(\.\d+)?[K,KB,kb]/.test(t)?1024*e:e}},watch:{value:function(t){this.fileUrl=t}},created(){this.headers={Authorization:"Bearer "+this.$store.getters.access_token},this.fileUrl=this.value},methods:{onRemove(t,e){this.fileList=e,this.$emit("on-remove",{file:t,fileList:e})},clear(){this.$refs.upload.clearFiles(),this.fileList=[],this.uploading=!1},onSuccess(t,e,i){this.uploading=!1,200===t.code?(i.length>1&&this.$refs.upload.handleRemove(i[0]),this.fileList=i,200===t.code&&(this.fileUrl=t.data.url),this.$emit("input",this.fileUrl)):this.$message.error(t.msg||"系统错误，请联系管理员")},onError(t,e,i){console.log({file:e,fileList:i}),this.uploading=!1;let n={};try{n=JSON.parse(t.message)}catch(o){console.log(o)}this.$message.error(n.msg||"导入失败，请联系管理员")},onBeforeUpload(t){return t.size>this.maxSizeByte?(this.$message({message:"文件大小不能超过"+this.maxSize,type:"error"}),!1):(this.uploading=!0,!0)},onDelete(){this.fileUrl="",this.$emit("input",this.fileUrl)},onView(){this.$refs.elImage.clickHandler()}}},bt=ft;i("e810");function gt(t,e,i,n,o,a,l,r){var s,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),l?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=s):o&&(s=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),s)if(c.functional){c._injectStyles=s;var p=c.render;c.render=function(t,e){return s.call(e),p(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,s):[s]}return{exports:t,options:c}}var yt=gt(bt,ht,mt,!1,null,"5c5070f2",null),At=yt.exports;At.install=function(t){t.component(At.name,At)};var vt=At,wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-tree-select"},[i("el-input",{ref:"input",attrs:{placeholder:"输入关键字进行过滤"},on:{focus:function(e){return t.onTaggleTree(!0)}},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),i("div",{ref:"treeDrown",staticClass:"sp-tree-select-drown"},[i("el-tree",{ref:"tree",attrs:{data:t.options,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode},on:{"node-click":t.onNodeClick}})],1)],1)},xt=[],Ct={name:"sp-tree-select",props:{value:{type:[String,Number],default:""},options:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"输入关键字进行过滤"},defaultProps:{type:Object,default:function(){return{label:"label",value:"value"}}}},data(){return{inputDom:null,drownDom:null,filterText:"",oldValue:"",selectedData:null,filterEnble:!0,hadShowSelectDrown:!1}},watch:{filterText(t){this.filterEnble?this.$refs.tree.filter(t):this.filterEnble=!0},value(t){this.hadShowSelectDrown=!1,this.filterEnble=!1,this.setData(this.options,t)},options(t){this.hadShowSelectDrown=!1,this.filterEnble=!1,this.setData(t,this.value)}},created(){this.setData(this.options,this.value)},methods:{setData(t,e){this.filterText=p(t,e),this.oldValue=e,this.selectedData={label:this.filterText,value:e}},onTaggleTree(t){t?(this.hadShowSelectDrown=!0,this.showSelectDrown(!0),document.addEventListener("click",this,!1)):setTimeout(()=>{c(this.selectedData)||this.filterText===this.selectedData.label?c(this.selectedData)&&this.filterText&&(this.filterText=""):(this.filterEnble=!1,this.filterText=this.selectedData.label,this.$refs.tree.filter("")),this.showSelectDrown(!1)},320)},showSelectDrown(t){if(c(this.drownDom)){const t=this.$refs.treeDrown;this.inputDom=this.$refs.input.$el;const e=this.inputDom.getBoundingClientRect();t.style.top=e.y+e.height+5+"px",t.style.left=e.x+"px",t.style.width=e.width+"px",this.drownDom=t,document.body.append(this.drownDom)}this.drownDom.style.display=t?"block":"none"},filterNode(t,e){return!t||!this.hadShowSelectDrown||-1!==e.label.indexOf(t)},onNodeClick(t){this.onTaggleTree(!1),document.removeEventListener("click",this,!1),this.selectedData=t,this.filterEnble=!1,this.filterText=t.label,t.value!==this.oldValue&&this.$emit("change",t.value),this.$emit("input",t.value)},handleEvent(t){switch(t.type){case"click":this.onClick(t);break;default:break}},onClick(t){!this.drownDom||this.drownDom.contains(t.target)||this.inputDom.contains(t.target)||(this.onTaggleTree(!1),document.removeEventListener("click",this,!1))}},destroyed(){c(this.drownDom)||this.drownDom.remove(),document.removeEventListener("click",this,!1)}},Dt=Ct,Tt=gt(Dt,wt,xt,!1,null,"770ac5f9",null),St=Tt.exports;St.install=function(t){t.component(St.name,St)};var Ot=St,kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-textarea"},[i("div",{staticClass:"sp-fouce sp-copy-el-input el-input--mini",on:{click:t.showTextarea}},[t.value&&t.value.length>0?i("p",{staticClass:"el-input__inner"},[t._v(t._s(t.value))]):i("p",{staticClass:"el-input__inner placeholder"},[t._v(t._s(t.placeholder))])]),i("div",{ref:"textareaPanel",staticClass:"sp-textarea-layout"},[i("el-input",{attrs:{type:"textarea",placeholder:t.placeholder,rows:10},on:{blur:t.onBlur},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])},Bt=[],_t={name:"sp-textarea",props:{value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""}},data(){return{content:"",oldValue:"",blur:!0,inputDom:null,textareaPanel:null}},watch:{value:function(t){this.setValue(t)}},created(){this.setValue(this.value)},methods:{setValue(t){t!==this.oldValue&&(this.content=t.replace(/,/g,"\n"),this.oldValue=t)},onBlur(t){let{value:e}=t.target;e&&(e=e.split(/\n/).filter(t=>t.length>0).join(",")),e!==this.oldValue&&(this.oldValue=e,this.$emit("change",e)),this.$emit("input",e),this.toggleTextarea(!1)},showTextarea(){this.toggleTextarea(!0)},hideTextarea(){this.toggleTextarea(!1)},toggleTextarea(t){if(c(this.textareaPanel)){const t=this.$refs.textareaPanel;this.inputDom=this.$el.querySelector(".sp-fouce");const e=this.inputDom.getBoundingClientRect();t.style.top=e.y+"px",t.style.left=e.x+"px",t.style.width=e.width+"px",this.textareaPanel=t,document.body.append(this.textareaPanel)}this.textareaPanel.style.display=t?"block":"none",t&&this.textareaPanel.querySelector("textarea").focus()},destroyed(){c(this.textareaPanel)||this.textareaPanel.remove()}}},Et=_t,Ft=gt(Et,kt,Bt,!1,null,null,null),Vt=Ft.exports;Vt.install=function(t){t.component(Vt.name,Vt)};var Mt=Vt,$t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-upload-img"},[i("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"点击此处粘贴上传"},on:{focus:t.addListener,blur:t.removeListener},model:{value:t.placeValue,callback:function(e){t.placeValue=e},expression:"placeValue"}}),i("el-upload",t._b({ref:"elUpload",attrs:{"file-list":t.fileList,disabled:t.disabled,"on-error":t.onUploadError,"on-exceed":t.onUploadExceed,"on-remove":t.onUploadRemove,"on-success":t.onUploadSuccess}},"el-upload",t.elProps,!1),[i("i",{staticClass:"el-icon-plus"})]),t.uploadError?i("p",{staticClass:"el-form-item__error"},[t._v(t._s(t.uploadError))]):t._e()],1)},Pt=[],Rt={name:"sp-upload-img",props:{value:{type:[String,Array],default:""},elProps:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},data(){return{uploadError:"",fileList:[],placeValue:"",lockValueWach:!1}},watch:{value:function(t){this.lockValueWach?this.lockValueWach=!1:this.fileList=this.getUploadFileList(t)}},created(){this.fileList=this.getUploadFileList(this.value)},methods:{onUploadSuccess(t,e){const i=e.response.data.url;let n=Array.isArray(this.value)?this.value.join(","):this.value;n?n+=","+i:n=i,this.lockValueWach=!0,this.$emit("input",n),this.$emit("change",n)},onUploadRemove(t){this.uploadError=null;let e=t.url;t.response&&t.response.data&&(e=t.response.data.url);const i=new RegExp(",?"+e+",?","g"),n=Array.isArray(this.value)?this.value.join(","):this.value;let o=n.replace(i,",");o=","===o[0]?o.slice(1):","===o[o.length-1]?o.substring(0,o.length-1):o,this.lockValueWach=!0,this.$emit("input",o),this.$emit("change",o)},onUploadError(t,e,i){console.log({err:t,file:e,fileList:i})},onUploadExceed(t,e){console.log({file:t,fileList:e}),this.uploadError=`最多上传${this.elProps.limit}张图片`},getUploadFileList(t){return"string"===typeof t&&t.length>0?t=t.split(","):Array.isArray(t)||(t=[]),t.filter(t=>"string"===typeof t&&t.length>0).map((t,e)=>({name:"img"+e,url:t}))},handleEvent(t){switch(t.type){case"paste":this.onPaste(t);break}},onPaste(t){const e=t.clipboardData||window.clipboardData,i=e.items,n=[];if(i&&i.length){for(var o=0;o<i.length;o++)-1!==i[o].type.indexOf("image")&&n.push(i[o].getAsFile());if(n.length>0)try{this.$refs.elUpload.$refs["upload-inner"].uploadFiles(n)}catch(a){console.log(a)}else this.$message.error("粘贴内容非图片")}else this.$message.error("当前浏览器不支持")},addListener(){document.addEventListener("paste",this,!1)},removeListener(){this.placeValue&&(this.placeValue=""),document.removeEventListener("paste",this,!1)}}},It=Rt,Lt=gt(It,$t,Pt,!1,null,null,null),zt=Lt.exports;zt.install=function(t){t.component(zt.name,zt)};var Ht=zt,jt={name:"sp-form-item",components:{SpUpload:vt,SpUploadImg:Ht,SpTreeSelect:Ot,SpTextarea:Mt},props:{value:[Number,String,Array,Object],prop:{type:String,default:"input"},label:String,type:{type:String,default:"form"},tip:String,component:{type:String,default:"input"},action:String,elFormItem:{type:Object,default:function(){return{}}},elProps:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rowIndex:{type:Number,default:0},rules:[Array,Object],remoteMethod:Function},data(){return{curValue:""}},watch:{value(t){t!==this.curValue&&(this.curValue=this.defValue(t))}},created(){this.curValue=this.defValue(this.value)},methods:{defValue(t){return this.isArrayValue()&&!Array.isArray(t)?[]:t},isArrayValue(){return"checkbox"===this.component||"select"===this.component&&this.elProps.multiple},onChange(t){this.$emit("input",t),this.$emit("change",t)}}},Ut=jt,Nt=(i("a6ea"),gt(Ut,ut,dt,!1,null,"2fa2282a",null)),Kt=Nt.exports;Kt.install=function(t){t.component(Kt.name,Kt)};var Wt=Kt;function Qt(t,e){let i=null;return e=e||200,function(){const n=arguments,o=this;clearTimeout(i),i=setTimeout((function(){t.apply(o,n)}),e)}}function Yt(t,e){let i;return e=e||1e3,function(){const n=arguments,o=Date.now();(!i||o-i>e)&&(i=o,t.apply(this,n))}}var qt={name:"sp-form",mixins:[pt],components:{SpFormItem:Wt},props:{option:{type:Object,default:function(){return{}}},data:{type:[Object,Array],default:function(){return{}}},type:{type:String,default:"form"},visible:{type:Boolean,default:!0},enterSubmit:{type:Boolean,defualt:!1}},data(){return{spOption:{}}},watch:{visible:function(t,e){t||t===e||this.changeFormData({...this.allForm})},data:function(t){this.setFormData(t,!1)}},created(){this.init(this.option,this.type)},methods:{setFormData(t={},e=!0){let i={};if(c(t))this.changeFormData(i);else{const n=U(t,this.option.column,this.formItemOptions,!0);i={};const o={};for(const t in this.allForm)i[t]=e?Object.hasOwnProperty.call(n,t)?n[t]:this.form[t]:n[t],Object.hasOwnProperty.call(this.unClearForm,t)&&(o[t]=i[t]);ot(t,this.option.column).then(t=>{this.formItemOptions={...this.formItemOptions,...t},this.changeFormData(i)}),this.unClearForm={...this.unClearForm,...o}}},changeFormData(t={}){this.form=t,this.clearWatchOptions(),this.watchDataChange(null,{...t}),this.$nextTick(()=>{this.$refs.form&&this.$refs.form.clearValidate()})},getFormData(t){return t?this.getSubmitData(this.form):{...this.form}},validateField(t,e){this.$refs.form.validateField(t,e)},validate(t){this.$refs.form.validate(t)},onChange(t,e,i){"treeselect"!==e||c(t)||this.$refs.form.clearValidate(i),this.watchDataChange(i,this.form);let n={};Array.isArray(this.formItemOptions[i])&&(n=Array.isArray(t)?this.formItemOptions[i].filter(e=>e&&t.includes(e.value)):this.formItemOptions[i].find(e=>e&&e.value.toString()===t)),this.$emit("change",i,t,n)},onSubmit:Yt((function(t){(!0!==t||this.enterSubmit)&&this.$refs.form.validate(t=>{t&&this.doSubmit(this.form)})}),3e3),doSubmit(t={},e){const i=this.getSubmitData(t);this.$emit("submit",i,e)},getSubmitData(t){for(const e in this.ignoreForm)this.ignoreForm[e]&&(t[e]=null);return N(t,this.option.column,this.formItemOptions)},onClear(){const t={...this.unClearForm};this.changeFormData(t)},clearWatchOptions(){for(const t in this.formItemOptions){const e=this.option.column.find(e=>e.prop===t);e&&R(e.options)&&c(this.form[t])&&this.$set(this.formItemOptions,t,[])}},onReset(){const t={...this.allForm};this.changeFormData(t),this.doSubmit(t,!0)},onCancel(){const t=s(this.form);this.$emit("cancel",t)}}},Gt=qt,Xt=(i("bbfb"),gt(Gt,l,r,!1,null,"01a900d6",null)),Jt=Xt.exports;Jt.install=function(t){t.component(Jt.name,Jt)};var Zt=Jt,te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-form sp-form-dynamic"},[i("el-form",{ref:"elform",attrs:{model:t.formData,"label-position":t.initOption.labelPosition,"label-width":t.initOption.labelWidth}},t._l(t.tableData,(function(e,n){return i("el-row",{key:n},[t._l(t.columnList,(function(o,a){return i("el-col",{key:a,attrs:{span:o.span}},[i("sp-form-item",{attrs:{component:o.component,label:0===a&&0!==n?"":o.label,prop:"list."+n+"."+o.prop,"el-form-item":o.elFormItemProps,"el-props":o.elProps,options:t.formItemOptions[o.prop],loading:t.remoteLoadingMap[o.prop]},on:{change:function(e){return t.onChange(e,o.prop,n)}},model:{value:e[o.prop],callback:function(i){t.$set(e,o.prop,i)},expression:"data[formItem.prop]"}})],1)})),i("el-col",{attrs:{span:2}},[i("div",{staticStyle:{"padding-left":"20px"}},[t.initOption.cloneBtn&&t.tableData.length-1>n?i("el-button",{attrs:{icon:"el-icon-copy-document",type:"text"},on:{click:function(i){return t.onClone(e,n)}}},[t._v("复制")]):t._e(),t.initOption.removeBtn&&t.tableData.length-1>n||!t.initOption.addBtn?i("el-button",{attrs:{icon:"el-icon-minus",type:"text"},on:{click:function(i){return t.onRemove(e,n)}}},[t._v("移除")]):t._e(),t.initOption.addBtn&&t.tableData.length-1===n?i("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:t.onAdd}},[t._v("添加")]):t._e(),null!==t.saveMethod?i("el-button",{attrs:{icon:"el-icon-check",type:"text",disabled:!t.changeRow[n]},on:{click:function(i){return t.onSave(e,n)}}},[t._v("保存")]):t._e()],1)])],2)})),1)],1)},ee=[],ie={props:{removeMethod:{type:Function,default:null},saveMethod:{type:Function,default:null},rowKey:{type:String,default:"id"},option:{type:Object,default:function(){return{column:[]}}},data:{type:[Array,Function],default:function(){return[]}}},data(){const t={addBtn:!0,cloneBtn:!1,removeBtn:!0,labelPosition:"right",labelWidth:"80px",selection:!0,column:[]};return{initOption:{},defOption:t,elTableOption:{},columnList:[],sourceData:[],tableData:[],formItemOptions:{},changeRow:[],removeRowsWithKey:[],editProps:{},requiredProps:{},remoteLoadingMap:{},asyncValueMap:{},defRowData:{},disabledMap:{},ruleLock:[],lockValueWatch:{}}},computed:{formData:function(){return{list:this.tableData}}},watch:{data(t){this.setData(t,this.initOption)},option(t){this.init(t,this.data)}},created(){c(this.option)||this.init(this.option,this.data)},methods:{init(t,e){t=st(t),t={...this.defOption,...t};const i=[],n={},o={},a={},l={},r={},s={},c={};t&&Array.isArray(t.column)&&t.column.filter(t=>1!=t.hide&&!1!==t.display).forEach(e=>{const p=this.extColumn(t,e,n,o);i.push(p),c[e.prop]=!0===e.disabled,"function"===typeof e.remoteMethod&&(l[e.prop]=!1),n[e.prop]=!0===e.required,!1!==e.tableEdit&&(o[e.prop]=!0),q(e,r,{},s),R(e.asyncValue)&&Y(e.prop,e.asyncValue,a)}),this.initOption=t,this.elTableOption=this.getElTableOption(t),this.requiredProps=n,this.editProps=o,this.asyncValueMap=a,this.remoteLoadingMap=l,this.formItemOptions=r,this.watchFormItemOptions=s,this.disabledMap=c,this.columnList=i,ot(e,t.column).then(i=>{this.formItemOptions={...this.formItemOptions,...i},this.setData(e,t)})},extColumn(t,e,i,n){const o=L(e.type),a=J(t,e),l="trigger"===e.type?"点击选择":a.placeholder;a.placeholder=l,"function"===typeof e.remoteMethod&&(a.filterable=!0,a.remote=!0,a.defaultFirstOption=!1!==e.defaultFirstOption);const r=Z(t,e);e.rules&&(r.rules=this.packRules(e.rules,e.prop));const s=tt(t,e);let c;return Array.isArray(e.children)&&(c=e.children.map(e=>this.extColumn(t,e,i,n))),i[e.prop]=!0===e.required,!1!==e.tableEdit&&(n[e.prop]=!0),{prop:e.prop,label:e.label,tableEdit:e.tableEdit,type:e.type,component:o,span:e.span||12,elProps:a,elFormItemProps:r,elTableColumProps:s,children:c}},extDefRowData(t={},e=[]){const i=Array.isArray(t.column)?t.column:[],n=j({},i,this.formItemOptions),o=i.filter(t=>t.valueClone);return o.length>0&&e.length>0&&o.forEach(t=>{n[t.prop]=e[0][t.prop]}),n},getElTableOption(t){const e=V(t),i=this;return"function"===typeof t.cellStyle&&(e.cellStyle=function({row:e,column:n,rowIndex:o,columnIndex:a}){const l=i.sourceData.find(t=>t.$idKey===e.$idKey);return t.cellStyle({row:l||e,column:n,rowIndex:o,columnIndex:a})}),e},getData(t){return t?new Promise((t,e)=>{this.$refs.elform.validate(i=>{if(i){const e=this.getValitateData();t(e)}else e&&e()})}):this.getValitateData()},addData(t){if(Array.isArray(t)&&t.length>0){const e=this.initOption.column.filter(t=>1!=t.hide),i=t.map(t=>U(t,e,this.formItemOptions));this.tableData=this.tableData.concat(i)}},getRemoveRows(){return this.removeRowsWithKey},resetRowData(t,e){this.tableData.splice(e,1,t)},resetTableData(t){if("function"===typeof t){const e=t(this.tableData);Array.isArray(e)||0!==e.length?this.tableData=e:this.tableData=[{...this.defRowData}]}},valitateRowData(t){if(c(t))return!1;for(const e in this.requiredProps)if(this.requiredProps[e]&&c(t[e]))return!1;return!0},onRemove(t,e){this.removeMethod&&t[this.rowKey]?this.removeMethod(t,i=>{i&&this.removeRow(t,e)}):this.removeRow(t,e)},removeRow(t,e){t[this.rowKey]&&this.removeRowsWithKey.push(t),this.tableData.splice(e,1),this.$nextTick(()=>{this.$refs.elform.clearValidate()})},onAdd(){const t={...this.defRowData};this.tableData.push(t)},onClone(t,e){const i=s(t);i[this.rowKey]&&(i[this.rowKey]=null),this.tableData.splice(e+1,0,i)},onSave(t,e){this.saveMethod&&(this.$set(this.changeRow,e,!1),this.saveMethod(t))},onChange(t,e,i,n){if(this.saveMethod){let t=this.tableData[n][this.rowKey];t||(t=!d(this.data[n],this.tableData[n])),this.$set(this.changeRow,n,t)}const o=this.getValitateData();this.valueWatch(i,n,o)},onTrigger(t,e){const i=s(this.tableData[e]);this.$emit("on-trigger",i,t,e)},haveSaveChange(){return!this.changeRow.some(t=>!0===t)},packRemoteMethod(t,e,i){const n=this,o=e;return"function"!==typeof t?function(){}:Qt((function(a){n.$set(n.remoteLoadingMap,o,!0),t(a,n.tableData[i]).then(t=>{n.$set(n.formItemOptions,e,t),n.$set(n.remoteLoadingMap,o,!1)})}))},valueWatch(t,e,i){let n=null;if(n="string"===typeof t?this.asyncValueMap[t]:it(this.asyncValueMap),!c(n)){const o=i[e],a=s(o);for(const e in n){const l=this.initOption.column.find(t=>t.prop===e),r=l?l.asyncValue:{},s=lt(r,a,this.formItemOptions);a[e]=n[e](o,t,s,i)}this.tableData.splice(e,1,a)}},packRuleValidator(t){const e=this;return function(i,n,o){const a=e.ruleLock.find(t=>t.field===i.field&&t.value===n);if(a){const t=a.time;if(a.time=Date.now(),Date.now()-t<1e3)return void o()}else e.ruleLock.push({field:i.field,value:n,time:Date.now()});const l=s(e.tableData),r=s(e.data);t(i,n,o,l,r)}},packRules(t){return t?(t=Array.isArray(t)?t:[t],t.map(t=>{const e={...t};return"function"===typeof e.validator&&(e.validator=this.packRuleValidator(e.validator)),e})):null}}},ne={name:"sp-form-dynamic",components:{SpFormItem:Wt},mixins:[ie],data(){return{}},methods:{setData(t,e){this.removeLock={},c(e)&&(e=this.option);let i=[];if(Array.isArray(t)&&t.length>0){const n=e.column.filter(t=>1!=t.hide);i=t.map(t=>U(t,n,this.formItemOptions))}this.initOption.addBtn&&(this.defRowData=this.extDefRowData(this.option,t),i.push({...this.defRowData})),this.tableData=i,this.removeRowsWithKey=[],this.$refs.elform&&this.$nextTick(()=>{this.$refs.elform.clearValidate()})},getValitateData(){const t=[];return this.tableData.forEach(e=>{this.valitateRowData(e)&&t.push(e)}),t}}},oe=ne,ae=gt(oe,te,ee,!1,null,null,null),le=ae.exports;le.install=function(t){t.component(le.name,le)};var re=le,se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-form-group"},[t._l(t.formOptionList,(function(e,n){return i("div",{key:n,staticClass:"sp-form-group-item"},[e.title?i("div",{staticClass:"sp-form-group-title"},[t._v(t._s(e.title))]):t._e(),e.dynamic?i("sp-form-dynamic",{ref:"formDynamic"+n,refInFor:!0,attrs:{type:"group",data:t.data,option:e},scopedSlots:t._u([t._l(t.slotList,(function(e){return{key:e.prop,fn:function(n){return[i("div",{key:e.prop},[t._t(e.prop,null,null,n)],2)]}}}))],null,!0)}):i("sp-form",{ref:"form"+n,refInFor:!0,attrs:{option:e,data:t.data,type:"group"},scopedSlots:t._u([t._l(t.slotList,(function(e){return{key:e.prop,fn:function(n){return[i("div",{key:e.prop},[t._t(e.prop,null,null,n)],2)]}}}))],null,!0)})],1)})),"form"===t.type?i("div",{style:{textAlign:"right"}},[t.spOption.submitBtn?i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onSubmit}},[t._v(t._s(t.spOption.submitBtnTxt))]):t._e(),t.spOption.clearBtn?i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:t.onClear}},[t._v(t._s(t.spOption.clearBtnTxt))]):t._e(),t.spOption.cancelBtn?i("el-button",{attrs:{icon:"el-icon-close"},on:{click:t.onCancel}},[t._v(t._s(t.spOption.cancelBtnTxt))]):t._e(),t._t("formHandle")],2):"search"===t.type?i("div",{style:{textAlign:"right"}},[t.spOption.submitBtn?i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSubmit}},[t._v(t._s(t.spOption.searchBtnTxt))]):t._e(),t.spOption.resetBtn?i("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:t.onReset}},[t._v(t._s(t.spOption.resetBtnTxt))]):t._e(),t.spOption.cancelBtn?i("el-button",{attrs:{icon:"el-icon-close"},on:{click:t.onCancel}},[t._v(t._s(t.spOption.cancelBtnText))]):t._e(),t._t("formHandle")],2):t._e()],2)},ce=[],pe={name:"sp-form-group",props:{option:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},type:{type:String,default:"form"}},data(){const t={cancelBtn:!1,clearBtn:!1,submitBtn:!0,resetBtn:!0,resetBtnTxt:"重置",submitBtnTxt:"提交",searchBtnTxt:"搜索",cancelBtnTxt:"取消",clearBtnTxt:"清空"};return{defSpFormOption:t,spOption:{},formOptionList:[],slotList:[],refs:[]}},created(){this.spOption={...this.defSpFormOption,...this.option},this.formOptionList=this.initConfig(this.spOption),this.refs=this.formOptionList.reduce((t,e,i)=>(e.dynamic?t.push("formDynamic"+i):t.push("form"+i),t),[]);let t=[];this.formOptionList.forEach(e=>{if(Array.isArray(e.column)){const i=e.column.filter(t=>!0===t.slot||"slot"===t.type);t=t.concat(i)}}),this.slotList=t},methods:{initConfig(t){const e={...t,group:null};let i=[];return Array.isArray(t.group)&&(i=t.group.map(t=>({...e,...t}))),i},onSubmit(){let t={};const e=this.refs.filter(t=>this.$refs[t]&&this.$refs[t][0]).map(t=>this.$refs[t][0].$refs.form.validate());Promise.all(e).then(()=>{this.refs.forEach(e=>{if(this.$refs[e]&&this.$refs[e][0]){const i=this.$refs[e][0].getFormData();t={...t,...i}}}),this.$emit("submit",t)},()=>{})},onClear(){this.refs.forEach(t=>{this.$refs[t]&&this.$refs[t][0]&&this.$refs[t][0].onClear()})},onCancel(){this.refs.forEach(t=>{this.$refs[t]&&this.$refs[t][0]&&this.$refs[t][0].onCancel()})},onReset(){this.onClear(),this.onSubmit()}}},ue=pe,de=(i("1148"),gt(ue,se,ce,!1,null,"19017af2",null)),he=de.exports;he.install=function(t){t.component(he.name,he)};var me=he,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sp-table"},[t.showElTable?n("el-table",t._b({ref:"elTable",class:{"highlight-current-row":t.spTableOption.highlightCurrentRow},attrs:{data:t.tableData,border:""},on:{"header-dragend":t.onHeaderDragend,"selection-change":t.onSelectionChange,"row-click":t.onRowClick,"sort-change":t.sortChange,"row-dblclick":t.onRowDblclick}},"el-table",t.elTableOption,!1),[t.spTableOption.selection?n("el-table-column",{attrs:{type:"selection",fixed:"left",align:"center",width:"40"}}):t._e(),t.spTableOption.expand?n("el-table-column",{attrs:{fixed:"left",type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("expand",null,null,e)]}}],null,!0)}):t._e(),n("el-table-column",{attrs:{fixed:"left",type:"index",index:t.indexMethod,align:"center","show-overflow-tooltip":"",label:"序号"}}),t._l(t.spColumn,(function(e){return[e.children&&e.children.length>0?n("el-table-column",{key:e.prop,attrs:{align:"center",fixed:e.fixed,label:e.label}},[t._l(e.children,(function(e){return[e.children&&e.children.length>0?n("el-table-column",{key:e.label,attrs:{align:"center",fixed:e.fixed,label:e.label}},t._l(e.children,(function(e){return n("el-table-column",t._b({key:e.prop},"el-table-column",e.elProps,!1))})),1):n("el-table-column",t._b({key:e.prop},"el-table-column",e.elProps,!1))]}))],2):"slot"!==e.type?n("el-table-column",t._b({key:e.prop},"el-table-column",e.elProps,!1)):n("el-table-column",t._b({key:e.prop,scopedSlots:t._u([{key:"default",fn:function(i){return[t._t(e.prop,null,null,{row:t.sourceData[i.$index],$index:i.$index})]}}],null,!0)},"el-table-column",e.elProps,!1))]})),n("template",{slot:"append"},[t.loading?n("div",{staticClass:"sp-load-wrap"},[n("img",{staticClass:"circular",attrs:{src:i("897e"),alt:"加载中"}})]):t._e()]),n("template",{slot:"empty"},[t.loading?n("div"):n("sp-empty",{staticStyle:{height:"100%","min-height":"300px"},attrs:{title:t.emptyTip}})],1),t.spTableOption.showRowAction?n("el-table-column",{attrs:{fixed:"right",align:"center",width:t.spTableOption.rowActionWidth,label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.spTableOption.viewBtn&&!1!==e.row.viewBtn?n("el-button",{attrs:{disabled:e.row.viewDisabled,type:"text",icon:"el-icon-view"},on:{click:function(i){return t.onRowView(t.sourceData[e.$index],e.$index)}}},[t._v("查看")]):t._e(),t.spTableOption.editBtn&&!1!==e.row.editBtn?n("el-button",{attrs:{disabled:e.row.editDisabled,type:"text",icon:"el-icon-edit"},on:{click:function(i){return t.onRowEdit(t.sourceData[e.$index],e.$index)}}},[t._v("编辑")]):t._e(),t.spTableOption.delBtn&&!1!==e.row.delBtn?n("el-button",{attrs:{disabled:e.row.delDisabled,type:"text",icon:"el-icon-delete"},on:{click:function(i){return t.onRowDel(t.sourceData[e.$index],e.$index)}}},[t._v("删除")]):t._e(),t._t("rowAction",null,null,{row:t.sourceData[e.$index],$index:e.$index})]}}],null,!0)}):t._e()],2):t._e(),t.dynamic&&t.loading?n("div",{staticClass:"sp-load-wrap"},[n("img",{staticClass:"circular",attrs:{src:i("897e"),alt:"加载中"}})]):t._e(),t.page.total>0?n("div",{staticClass:"sp-pagination-wrap"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.current,"page-sizes":t.pageSizes,"page-size":t.page.size,total:t.page.total},on:{"update:currentPage":function(e){return t.$set(t.page,"current",e)},"update:current-page":function(e){return t.$set(t.page,"current",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}}})],1):t._e()],1)},be=[];const ge=()=>{const t=window.navigator.userAgent.toLowerCase();return{UA:t,clientWidth:document.body.clientWidth,clientHeight:document.body.clientHeight}};var ye={name:"sp-table",props:{permission:{type:Object,default:function(){return{}}},option:{type:Object,default:function(){return{}}},data:{type:[Array,Function],default:function(){return[]}},autoLoad:{type:Boolean,default:!0},lazyLoad:{type:Boolean,default:!1},dynamic:{type:Boolean,default:!1},query:{type:Object,default:function(){return{}}}},data(){const t=[10,20,50,100,500];return{updateSpColumn:!1,deactivated:!1,tableData:[],sourceData:[],spTableOption:{},elTableOption:{},spColumn:[],loading:!1,emptyTip:"暂无数据",pageSizes:t,page:{current:1,size:t[0],total:0},indexMethod:1,params:{},sortConfig:{},bodyMaxHeight:-1}},computed:{showElTable:function(){return(this.dynamic&&!this.loading||!this.dynamic)&&!this.updateSpColumn&&!this.deactivated}},watch:{option:function(t){this.init(t)},data:function(t){Array.isArray(t)&&this.loadTableData(t)},query:function(t){this.resetTableData(t)}},created(){this.params={...this.query},this.dynamic||this.init(this.option),this.loading=this.lazyLoad},mounted(){this.autoLoad?this.loadTableData(this.params):this.emptyTip="请手动搜索",window.addEventListener("resize",this,!1)},destroyed(){window.removeEventListener("resize",this,!1)},activated(){this.deactivated=!1,this.setTableSize(!0),window.addEventListener("resize",this)},deactivated(){this.deactivated=!0,window.removeEventListener("resize",this)},methods:{handleEvent(t){switch(t.type){case"resize":this.setTableSize(!0);break}},init(t){t=st(t),this.elTableOption=this.getElTableOption(t),this.spColumn=this.getSpColumn(t),this.spTableOption=this.getSpOption(t)},getElTableOption(t){const e=V(t),i=this;return"function"===typeof t.cellStyle&&(e.cellStyle=function({row:e,column:n,rowIndex:o,columnIndex:a}){const l=i.sourceData.find(t=>t.$idKey===e.$idKey);return t.cellStyle({row:l||e,column:n,rowIndex:o,columnIndex:a})}),e},getSpColumn(t){return et(t)},getSpOption(t){const e={showRowAction:t.showRowAction||t.editBtn||t.delBtn},i={...D,...t,...e,...this.permission},n=this.calRowActionWidth(i);return i.rowActionWidth=n,i},setTableData(t){const e=t.map((t,e)=>(t.$idKey=e+this.indexMethod,t)),i=this.option.column.filter(t=>!0!==t.hide);W(e,{...this.option,column:i}).then(t=>{this.sourceData=e,this.tableData=t,this.emptyTip="暂无数据",this.loading=!1,this.$nextTick(()=>{this.setTableSize(),this.elTableOption.summaryMethod&&this.$refs.elTable.syncPostion()})})},getTableData(t){return s(t?this.sourceData:this.tableData)},setPage(t){t.total===this.page.total&&t.current===this.page.current||(this.page={...this.page,total:t.total,current:t.current})},loadTableData(t){if(this.params=c(t)?{}:t,"function"===typeof this.data){const e={...this.page,...t,...this.sortConfig,total:null};this.loading=!0,this.tableData=[],this.data(e,t=>{if(c(t))return void(this.loading=!1);let{option:i,data:n,total:o}=t||{};n=Array.isArray(n)?n:[],o=o||n.length||0,c(i)||this.init(i,n),this.setTableData(n),this.setPage({total:o,current:e.current})})}else Array.isArray(this.data)&&this.setTableData(this.data)},resetTableData(t={}){this.setPage({current:1}),this.indexMethod=1;const e=this.spTableOption.defaultSort;c(e)||(this.sortConfig=null,this.$refs.elTable.sort(e.prop,e.order)),this.loadTableData(t)},refreshTableData(t){if(t=!0===t?1:"number"===typeof t?t:0,t>0&&this.page.current>1){const e=this.page.total-t,i=Math.ceil(e/this.page.size);i<this.page.current&&this.setPage({current:i})}this.loadTableData(this.params)},handleSizeChange(t){this.page={...this.page,size:t,current:1},this.indexMethod=(this.page.current-1)*this.page.size+1,this.loadTableData(this.params)},handleCurrentChange(t){this.page.current=t,this.indexMethod=(this.page.current-1)*this.page.size+1,this.loadTableData(this.params)},onHeaderDragend(){this.$refs.elTable.doLayout()},sortChange(t){const{order:e,prop:i}=t;this.sortConfig?e===this.sortConfig.order&&i===this.sortConfig.prop||(this.sortConfig={order:e,prop:i},this.refreshTableData()):this.sortConfig={order:e,prop:i}},calRowActionWidth(t={}){if(t.rowActionWidth)return t.rowActionWidth;let e=["editBtn","delBtn","viewBtn"].reduce((e,i)=>e+(t[i]?65:0),0);if(this.$scopedSlots&&this.$scopedSlots.rowAction){const t=this.$scopedSlots.rowAction();t&&(e+=65*t.length)}return e<80?80:e},setTableSize:Qt((function(t){if(this.option.maxHeight)return;const e=this.$el;if(e&&(this.bodyMaxHeight<0||t)){const i=300,{clientHeight:n}=ge(),{top:o}=e.getBoundingClientRect();let a=n-o-77;a=a<i?i:a,this.bodyMaxHeight!==a&&(this.bodyMaxHeight=a,this.$set(this.elTableOption,"maxHeight",this.bodyMaxHeight),t&&this.$refs.elTable.doLayout())}}),480),resetSpColumn(t){const e={...this.option,column:t};this.updateSpColumn=!0,this.spColumn=et(e),this.$nextTick(()=>{this.updateSpColumn=!1})},onRowView(t,e){this.$emit("row-view",t,e)},onRowEdit(t,e){this.$emit("row-edit",t,e)},onRowDel(t,e){this.$emit("row-del",t,e)},onSelectionChange(t){const e=t.map(t=>this.sourceData.find(e=>e.$idKey===t.$idKey));this.$emit("selection-change",e)},clearSelection(){this.$refs.elTable.clearSelection()},onRowClick(t,e){const i=this.sourceData.find(e=>e.$idKey===t.$idKey);this.$emit("row-click",i,e)},onRowDblclick(t,e){const i=this.sourceData.find(e=>e.$idKey===t.$idKey);this.$emit("row-dblclick",i,e)},toggleRowSelection(t){const e=this.tableData.find(e=>e.$idKey===t.$idKey);this.$refs.elTable.toggleRowSelection(e)}}},Ae=ye,ve=gt(Ae,fe,be,!1,null,null,null),we=ve.exports;we.install=function(t){t.component(we.name,we)};var xe=we,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"elform",staticClass:"sp-table-form",attrs:{model:t.formData,"label-width":"0px"}},[t.isRender?n("el-table",t._b({ref:"elTable",attrs:{border:"",index:"","max-height":t.maxHeight,data:t.tableData},on:{"selection-change":t.onSelectionChange,"cell-click":t.onCellClick}},"el-table",t.elTableOption,!1),[t.initOption.selection?n("el-table-column",{attrs:{type:"selection",fixed:"left",align:"center",width:"40"}}):t._e(),n("el-table-column",{attrs:{fixed:"left",type:"index",align:"center",index:t.indexMethod,"show-overflow-tooltip":"",label:"序号"}}),t._l(t.columnList,(function(e,i){return[e.children&&e.children.length>0?n("el-table-column",t._b({key:i,attrs:{align:"center"}},"el-table-column",e.elTableColumProps,!1),[t._l(e.children,(function(i,o){return[!1!==i.tableEdit?n("el-table-column",t._b({key:o,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(o){return[t.disabledMap[e.prop]||t.disabledRowMap[e.prop+o.row.id]?n("span",{staticClass:"space-span"},[t._v(t._s(o.row[i.prop]))]):"trigger"!==i.type?n("sp-form-item",{attrs:{component:i.component,prop:"list."+o.$index+"."+i.prop,"row-index":o.$index,"el-form-item":i.elFormItemProps,"el-props":i.elProps,options:t.formItemOptions[i.prop],loading:t.remoteLoadingMap[i.prop],"remote-method":t.packRemoteMethod(i.elProps.remoteMethod,i.prop,o.$index)},on:{change:function(e){return t.onChange(e,i.component,i.prop,o.$index)}},model:{value:o.row[i.prop],callback:function(e){t.$set(o.row,i.prop,e)},expression:"scope.row[childColumn.prop]"}}):n("div",{staticClass:"sp-copy-el-input el-input--mini",on:{click:function(e){return t.onTrigger(i,o.$index)}}},[o.row[i.prop]?n("p",{staticClass:"el-input__inner"},[t._v(t._s(o.row[i.prop]))]):n("p",{staticClass:"el-input__inner placeholder"},[t._v(t._s(i.elProps.placeholder))])])]}}],null,!0)},"el-table-column",i.elTableColumProps,!1)):n("el-table-column",t._b({key:o,attrs:{align:"center"}},"el-table-column",i.elTableColumProps,!1))]}))],2):!1!==e.tableEdit?n("el-table-column",t._b({key:i,attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t.disabledMap[e.prop]||t.disabledRowMap[e.prop+i.row.id]?n("span",{staticClass:"space-span"},[t._v(t._s(i.row[e.prop]))]):"trigger"!==e.type?n("sp-form-item",{attrs:{component:e.component,prop:"list."+i.$index+"."+e.prop,"row-index":i.$index,"el-form-item":e.elFormItemProps,"el-props":e.elProps,options:t.formItemOptions[e.prop],loading:t.remoteLoadingMap[e.prop],"remote-method":t.packRemoteMethod(e.elProps.remoteMethod,e.prop,i.$index)},on:{change:function(n){return t.onChange(n,e.component,e.prop,i.$index)}},model:{value:i.row[e.prop],callback:function(n){t.$set(i.row,e.prop,n)},expression:"scope.row[column.prop]"}}):n("div",{staticClass:"sp-copy-el-input el-input--mini",on:{click:function(n){return t.onTrigger(e,i.$index)}}},[i.row[e.prop]?n("p",{staticClass:"el-input__inner"},[t._v(t._s(i.row[e.prop]))]):n("p",{staticClass:"el-input__inner placeholder"},[t._v(t._s(e.elProps.placeholder))])])]}}],null,!0)},"el-table-column",e.elTableColumProps,!1)):"slot"!==e.type?n("el-table-column",t._b({key:i,attrs:{align:"center"}},"el-table-column",e.elTableColumProps,!1)):n("el-table-column",t._b({key:e.prop,scopedSlots:t._u([{key:"default",fn:function(i){return[t._t(e.prop,null,null,{row:t.sourceData[i.$index],$index:i.$index})]}}],null,!0)},"el-table-column",e.elTableColumProps,!1))]})),t.showHandle?n("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.initOption.cloneBtn&&t.tableData.length-1>e.$index?n("el-button",{attrs:{icon:"el-icon-copy-document",type:"text"},on:{click:function(i){return t.onClone(e.row,e.$index)}}},[t._v("复制")]):t._e(),t.initOption.removeBtn&&t.tableData.length-1>e.$index||!t.initOption.addBtn?n("el-button",{attrs:{icon:"el-icon-minus",type:"text"},on:{click:function(i){return t.onRemove(e.row,e.$index)}}},[t._v("移除")]):t._e(),t.initOption.addBtn&&t.tableData.length-1===e.$index?n("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:t.onAdd}},[t._v("添加")]):t._e(),null!==t.saveMethod?n("el-button",{attrs:{icon:"el-icon-check",type:"text",disabled:!t.changeRow[e.$index]},on:{click:function(i){return t.onSave(e.row,e.$index)}}},[t._v("保存")]):t._e(),t._t("rowAction",null,null,Object.assign({},e,{tableData:t.tableData}))]}}],null,!0)}):t._e(),n("template",{slot:"append"},[t.loading||t.selfLoading?n("div",{staticClass:"sp-load-wrap"},[n("img",{staticClass:"circular",attrs:{src:i("897e"),alt:"加载中"}})]):t._e()]),n("template",{slot:"empty"},[t.selfLoading?n("div"):n("sp-empty",{staticStyle:{height:"100%","min-height":"160px"},attrs:{title:t.emptyTip}})],1)],2):t._e()],1)},De=[],Te={name:"sp-table-form",components:{SpFormItem:Wt},mixins:[ie],props:{dynamic:{type:Boolean,default:!1},query:{type:Object,default:function(){return{}}},loading:{type:Boolean,default:!1},indexMethod:{type:Number,default:1}},data(){return{sourceData:[],disabledRowMap:{},isRender:!0,haveSetTbMaxHeight:!1,maxHeight:1e3,selfLoading:!0,emptyTip:"暂无数据"}},computed:{showHandle:function(){return this.initOption.cloneBtn||this.initOption.removeBtn||this.initOption.addBtn||null!==this.saveMethod},dataReady:function(){return!this.loading&&!this.selfLoading}},mounted(){window.addEventListener("resize",this,!1)},destroyed(){window.removeEventListener("resize",this,!1)},activated(){this.setTableSize(!0),window.addEventListener("resize",this)},deactivated(){window.removeEventListener("resize",this)},methods:{handleEvent(t){switch(t.type){case"resize":this.setTableSize(!0);break}},setData(t,e,i=!1){if(this.isRender=!0,this.selfLoading=!0,this.tableData=[],this.sourceData=t,!i){c(e)&&(e=this.initOption);const i=t.map((t,e)=>(t.$idKey=e+this.indexMethod,t));Q(i,e).then(n=>{const{tableData:o,disabledMap:a,optionsMap:l}=n;this.disabledRowMap=a,this.sourceData=i,this.formItemOptions={...this.formItemOptions,...l},e.addBtn&&(this.defRowData=this.extDefRowData(e,t),o.push({...this.defRowData})),this.tableData=o,this.selfLoading=!1,this.$nextTick(()=>{this.$refs.elform&&this.$refs.elform.clearValidate(),this.setTableSize(),this.$refs.elTable&&(e.showSummary||e.summaryMethod)&&(this.$refs.elTable.syncPostion(),this.$refs.elTable.doLayout())})})}},getValitateData(){const t=[];return this.tableData.forEach(e=>{if(this.valitateRowData(e)){let i=e;if(e.$idKey){const t=this.sourceData.find(t=>t.$idKey===e.$idKey)||{},n=this.getRowEditData(e);t&&(i=s(t),Object.assign(i,n))}t.push(i)}}),t},getRowEditData(t){const e={};for(const i in this.editProps)e[i]=t[i];return e},toggleEditColumn(t,e){const i="string"===typeof t?[t]:Array.isArray(t)?t:[];if(i.length>0){const t={};i.forEach(i=>{t[i]="boolean"===typeof e?e:!this.disabledMap[i]}),this.disabledMap={...this.disabledMap,...t}}},resetTableColumn(t){const e={...this.initOption,column:t};this.isRender=!1,this.init(e,this.sourceData)},onSelectionChange(t){const e=t.map(t=>this.sourceData.find(e=>e.$idKey===t.$idKey));this.$emit("selection-change",e)},onCellClick(t,e){const i=this.sourceData.find(e=>e.$idKey===t.$idKey);this.$emit("cell-click",i,e)},validate(t){this.$refs.elform.validate(t)},setTableSize(t){let e=this.initOption.maxHeight;const i=this.$el;if(!i||e||!t&&this.haveSetTbMaxHeight)e&&(this.maxHeight=e);else{const t=300,{clientHeight:e}=ge(),{top:n}=i.getBoundingClientRect();let o=e-n-77;o=o<t?t:o,this.maxHeight!==o&&(this.maxHeight=o,this.haveSetTbMaxHeight=!0,this.$refs.elTable.doLayout())}}}},Se=Te,Oe=gt(Se,Ce,De,!1,null,null,null),ke=Oe.exports;ke.install=function(t){t.component(ke.name,ke)};var Be=ke,_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sp-crud sp-crud-form"},[t.spCrudOption.showSearchForm?n("el-collapse",{staticClass:"sp-el-collapse",attrs:{value:"collapse-search"}},[n("el-collapse-item",{ref:"collapseItem",staticClass:"sp-el-collapse-item",attrs:{name:"collapse-search"}},[n("sp-form",{ref:"spSearchForm",attrs:{type:"search","enter-submit":"",option:t.searchFormOption},on:{"init-data":t.onSearchInitSubmit,submit:t.onSearchSubmit},scopedSlots:t._u([t._l(t.searchSlotList,(function(e){return{key:e.prop,fn:function(i){return[n("div",{key:e.prop},[t._t(e.prop,null,null,i)],2)]}}}))],null,!0)})],1)],1):t._e(),n("div",{staticClass:"sp-crud-handle"},[n("div",{staticClass:"sp-crud-handle-left"},[t.spCrudOption.addBtn?n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onAddRow}},[t._v("新增")]):t._e(),t._t("menuLeft")],2),n("div",{staticClass:"sp-crud-handle-right"},[t.spCrudOption.columnBtn?n("el-button",{attrs:{icon:"el-icon-menu",circle:""},on:{click:function(e){t.columnDialogVisible=!0}}}):t._e(),t.spCrudOption.refreshBtn?n("el-button",{attrs:{icon:"el-icon-refresh",circle:""},on:{click:t.refreshTableData}}):t._e(),t.spCrudOption.searchBtn&&t.spCrudOption.showSearchForm?n("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(e){return t.onTaggleSearchForm()}}}):t._e(),t._t("menuRight")],2)]),t.dynamic&&t.tableFormInit||!t.dynamic?n("sp-table-form",{ref:"spTableForm",attrs:{option:t.spTbformOption,data:t.sourceData,loading:t.loading},on:{"selection-change":t.onSelectionChange,"cell-click":t.onCellClick},scopedSlots:t._u([t._l(t.tableSlotList,(function(e){return{key:e.prop,fn:function(i){return[n("div",{key:e.prop},[t._t(e.prop,null,null,i)],2)]}}}))],null,!0)}):t._e(),t.dynamic&&!t.tableFormInit?n("div",{staticClass:"sp-load-wrap"},[n("img",{staticClass:"circular",attrs:{src:i("897e"),alt:"加载中"}})]):t._e(),t.page.total>0?n("div",{staticClass:"sp-pagination-wrap"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":t.page.current,"page-sizes":t.pageSizes,"page-size":t.page.size,total:t.page.total},on:{"update:currentPage":function(e){return t.$set(t.page,"current",e)},"update:current-page":function(e){return t.$set(t.page,"current",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange},nativeOn:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.stopPropagation()}}})],1):t._e(),t.spCrudOption.addBtn?n("el-dialog",{attrs:{title:"新增",visible:t.addDialogVisible,width:"80%","append-to-body":""},on:{"update:visible":function(e){t.addDialogVisible=e}}},[n("sp-form",{ref:"addForm",attrs:{visible:t.addDialogVisible,option:t.addFormOption},on:{cancel:function(e){return t.onFormCancel("addForm")},submit:t.onAddSubmit}})],1):t._e(),t.spCrudOption.editBtn?n("el-dialog",{attrs:{title:"编辑",width:"80%",visible:t.editDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.editDialogVisible=e}}},[n("sp-form",{ref:"editForm",attrs:{option:t.editFormOption,data:t.selectedRowData},on:{cancel:function(e){return t.onFormCancel("editForm")},submit:t.onEditSubmit}})],1):t._e(),t.spCrudOption.viewBtn?n("el-dialog",{attrs:{title:"查看",width:"80%",visible:t.viewDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[n("sp-form",{ref:"viewForm",attrs:{type:"view",option:t.viewFormOption,data:t.selectedRowData}})],1):t._e(),t.spCrudOption.columnBtn?n("el-dialog",{attrs:{title:"自定义表格列",visible:t.columnDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.columnDialogVisible=e}}},[n("sp-column-board",{attrs:{visible:t.columnDialogVisible,"column-data":t.columnBoardData},on:{"update:visible":function(e){t.columnDialogVisible=e},submit:t.onColumnBoardSubmit}})],1):t._e()],1)},Ee=[],Fe={props:{permission:{type:Object,default:function(){return{}}},option:{type:Object,default:function(){return{}}},data:{type:[Array,Function],default:function(){return[]}},autoLoad:{type:Boolean,default:!0},lazyLoad:{type:Boolean,default:!1},dynamic:{type:Boolean,default:!1},query:{type:Object,default:function(){return{}}}},data(){const t=[10,20,50,100,500];return{initOption:{},spCrudOption:{},pageSizes:t,page:{current:1,size:t[0],total:0},indexMethod:1,addDialogVisible:!1,editDialogVisible:!1,viewDialogVisible:!1,columnDialogVisible:!1,addFormOption:{},editFormOption:{},viewFormOption:{},searchFormOption:{},searchPropsInMore:[],searchSpread:!1,columnBoardData:[],boardColumData:null,searchSlotList:[],tableSlotList:[]}},methods:{initCrudOptions(t){t.addBtn&&(this.addFormOption=this.getAddFormOption(t)),t.editBtn&&(this.editFormOption=this.getEditFormOption(t)),t.viewBtn&&(this.viewFormOption=this.getViewFormOption(t)),t.showSearchForm&&(this.searchFormOption=this.getSearchFormOption(t),this.searchPropsInMore=this.searchFormOption.column.filter(t=>"more"===t.search).map(t=>t.prop)),this.spCrudOption=t,this.columnBoardData=t.column.filter(t=>!0===t.custAble||!0!==t.hide),this.searchSlotList=t.column.filter(t=>t.search&&"slot"===t.type),this.tableSlotList=t.column.filter(t=>!0===t.slot||"slot"===t.type)},getSpCrudOption(t,e={}){let i=!1;return t&&Array.isArray(t.column)&&(i=t.column.some(t=>!0===t.search)),{...C,...t,showSearchForm:i,...e}},getSearchFormOption(t){let e=[];Array.isArray(t.column)&&(e=t.column.filter(t=>t.search).map(e=>{let i=e.searchLabelWidth||e.labelWidth||t.searchLabelWidth||t.labelWidth;i="number"===typeof i?i+"px":i;const n={type:e.searchType||e.type,labelWidth:i,span:e.searchSpan||24,index:e.index||999,rules:null,slot:null,display:!0===e.search,disabled:!1,editAble:null,addAble:null,canClear:!1!==e.canClear&&c(e.defaultValue),tip:null};return"select"===n.type&&e.multiple&&(n.collapseTags=!0),{...e,...n}}).sort((t,e)=>{const i=t.searchIndex||999,n=e.searchIndex||999;return i-n}));const i=S(t);return{...i,labelPosition:"right",column:e}},getAddFormOption(t){let e=[];Array.isArray(t.column)&&(e=t.column.filter(t=>!1!==t.addAble).map(t=>{const e={span:t.addSpan||t.span||24,display:c(t.addDisplay)?t.display:t.addDisplay,disabled:c(t.addDisabled)?t.disabled:t.addDisabled,type:t.addType||t.type,index:t.index||999,editAble:null,slot:null};return{...t,...e}}));const i=S(t);return{...i,column:e}},getEditFormOption(t){let e=[];Array.isArray(t.column)&&(e=t.column.filter(t=>!1!==t.editAble).map(t=>{const e={span:t.editSpan||t.span||24,display:c(t.editDisplay)?t.display:t.editDisplay,disabled:c(t.editDisabled)?t.disabled:t.editDisabled,type:t.editType||t.type,index:t.index||999,addAble:null,slot:null,rules:!1===t.editRules?null:t.rules};return{...t,...e}}));const i=S(t);return{...i,column:e}},getViewFormOption(t){let e=[];Array.isArray(t.column)&&(e=t.column.filter(t=>!1!==t.editAble).map(t=>{const e={span:t.span||24,display:!1!==t.viewDisplay,disabled:!0,type:t.type,index:t.index||999,slot:null,rules:null};return{...t,...e}}));const i=S(t);return{...i,column:e}},onShowMoreSearch(){this.$refs.spSearchForm&&(this.$refs.spSearchForm.toggleDisplay(!this.searchSpread,this.searchPropsInMore,this.searchSpread),this.searchSpread=!this.searchSpread,setTimeout(()=>{this.setTableSize(!0)},500))},setPage(t){t.total===this.page.total&&t.current===this.page.current||(this.page={...this.page,total:t.total,current:t.current})},handleSizeChange(t){this.page={...this.page,size:t,current:1},this.indexMethod=(this.page.current-1)*this.page.size+1,this.loadTableData(this.params)},handleCurrentChange(t){this.page.current=t,this.indexMethod=(this.page.current-1)*this.page.size+1,this.loadTableData(this.params)},onSearchSubmit(t={}){this.resetTableData({...this.params,...t},!1,!0)},onSearchInitSubmit(t={}){this.autoLoad&&this.resetTableData({...this.params,...t},!1,!0)},onAddSubmit(t){const e=this;this.$emit("add-submit",t,(function(t){t&&(e.addDialogVisible=!1,e.refreshTableData())}))},onEditSubmit(t){const e=this;this.$emit("edit-submit",t,(function(t){t&&(e.editDialogVisible=!1,e.refreshTableData())}))},onFormCancel(t){"addForm"===t?this.addDialogVisible=!1:this.editDialogVisible=!1},onTaggleSearchForm(){this.$refs.collapseItem.handleHeaderClick(),setTimeout(()=>{this.setTableSize(!0)},500)},resetColumnWithBoard(t,e){const i={};e.forEach(t=>{i[t.prop]=t});let n=[];Array.isArray(t.column)&&t.column.length>0&&(n=t.column);const o=n.filter(t=>t.custAble||!0!==t.hide).map(t=>{const e=i[t.prop];if(e){if(Array.isArray(t.children)&&t.children.length>0){let i=null;c(e.width)||isNaN(e.width)||(i=Number(e.width)/t.children.length),t.children=t.children.map(t=>{const e=0===i?t.width:i;return{...t,width:e}})}return{...t,...e}}return t}).sort((t,e)=>{const i=isNaN(t.sort)?99:t.sort,n=isNaN(e.sort)?99:e.sort;return i-n});return o},onColumnBoardSubmit(t){this.boardColumData=t;const e=this.resetColumnWithBoard(this.initOption,t);if(this.resetTableColumn(e),this.columnDialogVisible=!1,this.useOptions&&"function"===typeof this.useOptions.saveColumn){let e=this.$route.meta.menuId;this.option.custOptionId&&(e=e.toString()+this.option.custOptionId);const i=t.map((t,i)=>({menuId:e,prop:t.prop,show:t.hide?"0":"1",fixed:t.fixed?t.fixed:"0",width:t.width,sort:i}));this.useOptions.saveColumn(i)}}}},Ve={name:"sp-crud-form",mixins:[Fe],props:{removeMethod:Function,saveMethod:Function,rowKey:{type:String,default:"id"}},data(){return{sourceData:[],tableFormInit:!1,spTbformOption:{},loading:!0,boardColumn:null,params:{}}},created(){this.params=this.query,this.init(this.option)},methods:{init(t){this.initOption=t;const e=this.getSpCrudOption(t,this.permission);this.initCrudOptions(e),this.dynamic||this.initTableForm(e,[]),e.showSearchForm||this.loadTableData(this.params,!0)},initTableForm(t,e){if(this.boardColumData){const e=this.resetColumnWithBoard(t,this.boardColumData);t.column=e}this.spTbformOption=this.getTableFormOption(t),this.sourceData=e,this.tableFormInit=!0},getTableFormOption(t){const e=k(t);let i=Array.isArray(t.column)?t.column:[];return i=i.filter(t=>!0!==t.hide),{...e,column:i}},loadTableData(t={},e){if(this.tableFormInit=!this.dynamic||!e,(!this.loading||!this.tableFormInit)&&"function"===typeof this.data){this.loading=!0;const e={...this.page,...t,total:null};this.tableFormInit&&this.$refs.spTableForm&&this.$refs.spTableForm.setData([],null,!0),this.data(e,t=>{this.loading=!1;let{option:i,data:n,total:o}=t||{};n=Array.isArray(n)?n:[],o=o||n.length||0,this.tableFormInit?this.setTableFormData(n):(c(i)?i=this.spCrudOption:(this.initOption=i,i=this.getSpCrudOption(i,this.permission)),this.initTableForm(i,n)),this.setPage({total:o,current:e.current})})}},resetTableData(t={},e,i){this.setPage({current:1}),this.indexMethod=1,this.$refs.spSearchForm&&!i&&this.$refs.spSearchForm.setFormData(t,!1),this.params=t,this.loadTableData(this.params,!0)},refreshTableData(t){if(t&&this.page.current>1){const t=this.page.total-1,e=Math.ceil(t/this.page.size);e<this.page.current&&this.setPage({current:e})}this.loadTableData(this.params)},toggleEditColumn(t,e){this.$refs.spTableForm.toggleEditColumn(t,e)},resetTableColumn(t){this.$refs.spTableForm&&this.$refs.spTableForm.resetTableColumn(t)},setTableFormData(t,e){c(e)&&(e=this.spTbformOption),this.$refs.spTableForm&&this.$refs.spTableForm.setData(t,e)},getData(t){return this.$refs.spTableForm.getData(t)},resetRowData(t,e){this.$refs.spTableForm.resetRowData(t,e)},setTableSize(t){this.$refs.spTableForm.setTableSize(t)},handleSizeChange(t){this.page={...this.page,size:t,current:1},this.indexMethod=(this.page.current-1)*this.page.size+1,this.loadTableData(this.params)},onSelectionChange(t){this.$emit("selection-change",t)},onCellClick(t,e){this.$emit("cell-click",t,e)}}},Me=Ve,$e=gt(Me,_e,Ee,!1,null,null,null),Pe=$e.exports;Pe.install=function(t){t.component(Pe.name,Pe)};var Re=Pe,Ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-crud"},[t.spCrudOption.showSearchForm?i("el-collapse",{staticClass:"sp-el-collapse",attrs:{value:"collapse-search"}},[i("el-collapse-item",{ref:"collapseItem",staticClass:"sp-el-collapse-item",attrs:{name:"collapse-search"}},[i("sp-form",{ref:"spSearchForm",attrs:{type:"search","enter-submit":"",option:t.searchFormOption},on:{"init-data":t.onSearchInitSubmit,submit:t.onSearchSubmit},scopedSlots:t._u([t._l(t.searchSlotList,(function(e){return{key:e.prop,fn:function(n){return[i("div",{key:e.prop},[t._t(e.prop,null,null,n)],2)]}}}))],null,!0)}),t.searchPropsInMore.length>0?i("div",{staticClass:"search-more"},[t.searchSpread?i("el-button",{attrs:{type:"text",icon:"el-icon-s-unfold"},on:{click:t.onShowMoreSearch}},[t._v("收起更多搜索")]):i("el-button",{attrs:{type:"text",icon:"el-icon-s-fold"},on:{click:t.onShowMoreSearch}},[t._v("展开更多搜索")])],1):t._e()],1)],1):t._e(),i("div",{staticClass:"sp-crud-handle"},[i("div",{staticClass:"sp-crud-handle-left"},[t.spCrudOption.addBtn?i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.onAddRow}},[t._v("新增")]):t._e(),t._t("menuLeft")],2),i("div",{staticClass:"sp-crud-handle-right"},[t.spCrudOption.columnBtn?i("el-button",{attrs:{icon:"el-icon-menu",circle:""},on:{click:function(e){t.columnDialogVisible=!0}}}):t._e(),t.spCrudOption.refreshBtn?i("el-button",{attrs:{icon:"el-icon-refresh",circle:""},on:{click:t.refreshTableData}}):t._e(),t.spCrudOption.searchBtn&&t.spCrudOption.showSearchForm?i("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(e){return t.onTaggleSearchForm()}}}):t._e(),t._t("menuRight")],2)]),t.spTableOption.column&&t.spTableOption.column.length>0?i("sp-table",{ref:"elTable",staticClass:"sp-crud-table",attrs:{dynamic:t.dynamic,option:t.spTableOption,data:t.data,"auto-load":t.autoLoad&&!t.spCrudOption.showSearchForm,"lazy-load":t.autoLoad&&t.spCrudOption.showSearchForm},on:{"row-del":t.onRowDel,"row-edit":t.onRowEdit,"row-view":t.onRowView,"selection-change":t.onSelectionChange,"row-click":t.onRowClick,"row-dblclick":t.onRowDblclick},scopedSlots:t._u([{key:"expand",fn:function(e){return[t._t("expand",null,null,e)]}},{key:"rowAction",fn:function(e){return[t._t("rowAction",null,null,e)]}},t._l(t.tableSlotList,(function(e){return{key:e.prop,fn:function(n){return[i("div",{key:e.prop},[t._t(e.prop,null,null,n)],2)]}}}))],null,!0)}):t._e(),t.spCrudOption.addBtn?i("el-dialog",{attrs:{title:"新增",visible:t.addDialogVisible,width:"80%","append-to-body":""},on:{"update:visible":function(e){t.addDialogVisible=e}}},[i("sp-form",{ref:"addForm",attrs:{visible:t.addDialogVisible,option:t.addFormOption,data:t.addFormData},on:{cancel:function(e){return t.onFormCancel("addForm")},submit:t.onAddSubmit}})],1):t._e(),t.spCrudOption.editBtn?i("el-dialog",{attrs:{title:"编辑",width:"80%",visible:t.editDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.editDialogVisible=e}}},[i("sp-form",{ref:"editForm",attrs:{option:t.editFormOption,data:t.editFormData},on:{cancel:function(e){return t.onFormCancel("editForm")},submit:t.onEditSubmit}})],1):t._e(),t.spCrudOption.viewBtn?i("el-dialog",{attrs:{title:"查看",width:"80%",visible:t.viewDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.viewDialogVisible=e}}},[i("sp-form",{ref:"viewForm",attrs:{type:"view",option:t.viewFormOption,data:t.selectedRowData}})],1):t._e(),t.spCrudOption.columnBtn?i("el-dialog",{attrs:{title:"自定义表格列",visible:t.columnDialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.columnDialogVisible=e}}},[i("sp-column-board",{attrs:{visible:t.columnDialogVisible,"column-data":t.columnBoardData},on:{"update:visible":function(e){t.columnDialogVisible=e},submit:t.onColumnBoardSubmit}})],1):t._e()],1)},Le=[],ze={name:"sp-crud",mixins:[Fe],data(){return{spTableOption:{},defSearchParams:{},selectedRowData:{},addFormData:{},editFormData:{}}},mounted(){this.init(this.option)},methods:{init(t={}){this.initOption=t;const e=this.getSpCrudOption(t);this.initCrudOptions(e),this.spTableOption=this.getTableOption(e)},getSpCrudOption(t){let e=!1;return t&&Array.isArray(t.column)&&(e=t.column.some(t=>!0===t.search)),{...C,...t,showSearchForm:e,...this.permission}},getTableOption(t){const e=O(t);return{...e,column:t.column}},setTableSize(t){this.$refs.elTable.setTableSize(t)},loadTableData(t){this.$refs.elTable.loadTableData(t)},resetTableData(t={},e=!1,i){this.$refs.spSearchForm&&!i&&(this.$refs.spSearchForm.setFormData(t,e),e&&(t=this.$refs.spSearchForm.getFormData(!0))),this.$refs.elTable.resetTableData(t)},refreshTableData(t){this.$refs.elTable.refreshTableData(t)},onAddRow(){this.addFormData={},this.addDialogVisible=!0},onRowView(t){this.selectedRowData=t,this.viewDialogVisible=!0},onRowEdit(t){this.editFormData=t,this.editDialogVisible=!0},onRowDel(t){const e=this;this.$emit("row-del",t,t=>{t&&e.$refs.elTable.refreshTableData(!0)})},resetTableColumn(t){this.$refs.elTable&&this.$refs.elTable.resetSpColumn(t)},getTableData(t){return this.$refs.elTable.getTableData(t)},onSelectionChange(t){this.$emit("selection-change",t)},onRowClick(t,e){this.$emit("row-click",t,e)},onRowDblclick(t,e){this.$emit("row-dblclick",t,e)},toggleRowSelection(t){this.$refs.elTable.toggleRowSelection(t)},clearSelection(){this.$refs.elTable.clearSelection()}}},He=ze,je=gt(He,Ie,Le,!1,null,null,null),Ue=je.exports;Ue.install=function(t){t.component(Ue.name,Ue)};var Ne=Ue,Ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-tree"},[i("el-input",{ref:"elInput",staticClass:"sp-filter-bar",attrs:{placeholder:"输入关键字进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),i("div",{ref:"treeDrown",staticClass:"sp-tree-content"},[i("el-tree",{ref:"elTree",attrs:{data:t.data,load:t.load,lazy:t.lazy,props:t.props,"node-key":t.nodeKey,"default-expand-all":t.defaultExpandAll,"expand-on-click-node":t.expandOnClickNode,"default-expanded-keys":t.defaultExpandedKeys,"filter-node-method":t.filterNode,"current-node-key":t.currentNodeKey,"highlight-current":""},on:{"node-click":t.onNodeClick},scopedSlots:t._u([t.slotAble?{key:"default",fn:function(e){return[t._t("default",null,null,e)]}}:null],null,!0)})],1)],1)},We=[],Qe={name:"sp-tree",props:{data:{type:Array,default:function(){return[]}},placeholder:{type:String,default:"输入关键字进行过滤"},props:{type:Object,default:function(){return{}}},load:{type:Function,default:null},lazy:{type:Boolean,default:!1},slotAble:{type:Boolean,default:!1},defaultExpandAll:{type:Boolean,default:!0},expandOnClickNode:{type:Boolean,default:!0},defaultExpandedKeys:{type:Array,default:function(){return[-1]}},currentNodeKey:{type:[String,Number],default:""}},data(){return{filterText:""}},computed:{nodeKey:function(){return this.props.value||"value"}},watch:{filterText(t){this.$refs.elTree.filter(t)}},created(){},methods:{filterNode(t,e){if(!t)return!0;let i="label";return this.props&&this.props.label&&(i=this.props.label),-1!==e[i].indexOf(t)},onNodeClick(t,e,i){this.$emit("node-click",t,e,i)},updateKeyChildren(t,e){this.$refs.elTree.updateKeyChildren(t,e)}}},Ye=Qe,qe=(i("0f5d"),gt(Ye,Ke,We,!1,null,"296869ca",null)),Ge=qe.exports;Ge.install=function(t){t.component(Ge.name,Ge)};var Xe=Ge,Je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",{staticStyle:{border:"1px solid #ccc",padding:"5px"}},[t.showTable?i("el-table",{ref:"eltable",staticStyle:{width:"100%"},attrs:{data:t.defColumnData,"max-height":t.maxHeight,border:""}},[i("el-table-column",{attrs:{align:"center",prop:"sort",width:"76",label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"el-input el-input--mini"},[i("input",{staticClass:"el-input__inner",attrs:{placeholder:"输入正整数"},domProps:{value:e.$index+1},on:{keydown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.onSortBlur(i,e.$index)},blur:function(i){return t.onSortBlur(i,e.$index)}}})])]}}],null,!1,4154201786)}),i("el-table-column",{attrs:{prop:"label",align:"center",label:"字段名称"}}),i("el-table-column",{attrs:{prop:"showAble",align:"center",width:"80",label:"是否显示"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{model:{value:t.defColumnData[e.$index].showAble,callback:function(i){t.$set(t.defColumnData[e.$index],"showAble",i)},expression:"defColumnData[scope.$index].showAble"}})]}}],null,!1,898495923)}),i("el-table-column",{attrs:{prop:"width",align:"center",label:"列宽"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:"输入正数"},model:{value:t.defColumnData[e.$index].width,callback:function(i){t.$set(t.defColumnData[e.$index],"width",i)},expression:"defColumnData[scope.$index].width"}})]}}],null,!1,4194662676)}),i("el-table-column",{attrs:{prop:"width",align:"center",label:"固定位置"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-select",{attrs:{placeholder:"固定位置"},model:{value:t.defColumnData[e.$index].fixed,callback:function(i){t.$set(t.defColumnData[e.$index],"fixed",i)},expression:"defColumnData[scope.$index].fixed"}},[i("el-option",{attrs:{label:"不固定",value:"0"}}),i("el-option",{attrs:{label:"固定左侧",value:"left"}}),i("el-option",{attrs:{label:"固定右侧",value:"right"}})],1)]}}],null,!1,3426190261)}),i("el-table-column",{attrs:{prop:"handle",align:"center",width:"80",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",icon:"el-icon-thumb"},nativeOn:{mousedown:function(i){return t.onSortMouseDown(i,e.$index)}}},[t._v("拖动")])]}}],null,!1,1875752022)})],1):t._e()],1),i("div",{staticClass:"lay-bottom"},[i("div",{staticClass:"btn-bar"},[i("el-button",{staticClass:"inner-btn",attrs:{type:"primary",icon:"el-icon-refresh-right"},on:{click:t.onReset}},[t._v("恢复默认")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.onSubmit}},[t._v("确认")]),i("el-button",{attrs:{icon:"el-icon-close"},on:{click:t.onClose}},[t._v("取消")])],1)])],1)},Ze=[],ti={name:"sp-column-board",props:{columnData:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1}},data(){return{showTable:!1,defColumnData:[],rowTrs:null,haveSetTbMaxHeight:!1,maxHeight:400,drag:{tableBody:null,rect:{},target:null,targetTrCount:0,cellHeight:0,startMouseY:0,moveMouseY:0,formIndex:0,spaceTr:null,spaceTrIndex:-1,toIndex:0}}},watch:{columnData:function(t){this.defColumnData=this.markDefColumnData(t)},visible:function(t){this.showTable=t,t&&this.$nextTick(()=>{this.setTableSize()})}},created(){this.defColumnData=this.markDefColumnData(this.columnData)},mounted(){this.setTableSize(!0)},methods:{markDefColumnData(t=[]){const e=Array.isArray(t)?t:[];return e.map((t,e)=>{let i=m(t.width);return i=!i||i<=0?null:i,{id:t.id?t.id:e+1,width:i,label:t.label,prop:t.prop,showAble:!0!==t.hide,sort:e+1,fixed:"left"!==t.fixed&&"right"!==t.fixed?"0":t.fixed,defSort:isNaN(t.defSort)?e+1:t.defSort}})},onClose(){this.$emit("update:visible",!1)},onSubmit(){const t=this.defColumnData.map((t,e)=>({prop:t.prop,hide:!t.showAble,fixed:"0"===t.fixed?null:t.fixed,width:isNaN(t.width)||Number(t.width)<=0?null:Number(t.width),sort:e}));this.$emit("submit",t)},rowMove(t,e){const i=t.row,n=t.$index,o=e?n+e:i.defSort;this.move(n,o)},move(t,e){if(e!==t)if(e<0)this.$message({message:"已经是列表中第一行,不可上移！",type:"warning"});else if(e>=this.defColumnData.length)this.$message({message:"已经是列表中最后一行,不可下移！",type:"warning"});else{const i=this.defColumnData[t];i&&(this.defColumnData.splice(t,1),this.defColumnData.splice(e,0,i))}},onReset(){this.defColumnData=this.markDefColumnData(this.columnData)},onSortBlur(t,e){const i=t.target.value;if(isNaN(i))return;const n=i-1;this.move(e,n)},handleEvent(t){switch(t.type){case"mousemove":this.onSortMouseMove(t);break;case"mouseup":this.onSortMouseUp();break}},onSortMouseMove(t){this.drag.moveMouseY=t.clientY;const e=this.drag.moveMouseY-this.drag.startMouseY,i=this.drag.targetY+e;let n=Math.round((i-this.drag.rect.top)/this.drag.cellHeight);n=n<0?0:n>this.drag.targetTrCount-1?this.drag.targetTrCount-1:n,n!==this.drag.toIndex&&(this.setSpaceTr(n),this.drag.toIndex=n),this.drag.target.style.top=i+"px"},onSortMouseUp(){document.removeEventListener("mousemove",this,!1),document.removeEventListener("mouseup",this,!1),this.drag.target&&(this.drag.target.remove(),this.drag.target=null),this.drag.spaceTr&&(this.drag.spaceTr.style.opacity="1"),this.showTable=!1,this.move(this.drag.formIndex,this.drag.toIndex),this.$nextTick(()=>{this.showTable=!0})},getMoveTarget(){const t=this.drag.tableBody.parentElement,e=t.parentElement,i=this.drag.tableBody.getBoundingClientRect(),n=this.drag.tableBody.cloneNode(!0),o=document.createElement("div"),a=document.createElement("div");a.className=e.className;const l=document.createElement("div");return l.className=t.className,o.style.opacity="0.6",o.style.position="fixed",o.style.zIndex="3000",o.style.backgroundColor="#fff",o.style.width=i.width+"px",o.style.top=i.top+"px",o.style.left=i.left+"px",l.append(n),a.append(l),o.append(a),this.drag.rect=i,o},setSpaceTr:Qt((function(t){this.rowTrs&&(0===t&&this.rowTrs[0].before(this.drag.spaceTr),t===this.rowTrs.length-1?this.rowTrs[this.rowTrs.length-1].after(this.drag.spaceTr):this.rowTrs[t-1]?t-1===this.drag.spaceTrIndex?this.rowTrs[t].after(this.drag.spaceTr):this.rowTrs[t-1].after(this.drag.spaceTr):this.rowTrs[t+1]&&(t+1===this.drag.spaceTrIndex?this.rowTrs[t].before(this.drag.spaceTr):this.rowTrs[t+1].before(this.drag.spaceTr)),this.drag.spaceTrIndex=t)})),onSortMouseDown(t,e){this.drag.formIndex=e,this.drag.startMouseY=t.clientY;const i=this.$refs.eltable.$el,n=i.getElementsByClassName("el-table__body");if(n.length>0&&(this.drag.tableBody=n[0]),this.drag.tableBody&&(this.drag.target=this.getMoveTarget(),this.rowTrs=this.drag.tableBody.getElementsByClassName("el-table__row"),document.body.append(this.drag.target)),this.drag.target){const t=this.drag.target.getElementsByClassName("el-table__row");if(t&&t.length>0)for(let i=0;i<t.length;i++)i!==e&&(t[i].style.display="none");this.drag.targetTrCount=t.length,this.drag.cellHeight=this.drag.rect.height/t.length,this.drag.targetY=this.drag.rect.top+this.drag.cellHeight*e,this.drag.target.style.top=this.drag.targetY+"px",this.drag.target.style.display="block",this.drag.formIndex=e,this.drag.toIndex=null,this.drag.spaceTr=this.rowTrs[e],this.drag.spaceTr.style.opacity="0.4",this.setSpaceTr(e)}document.addEventListener("mousemove",this,!1),document.addEventListener("mouseup",this,!1)},setTableSize(t){let e;if(t||!this.haveSetTbMaxHeight){const t=300,{clientHeight:e}=ge(),i=this.$el,n=i.querySelector(".el-container"),{top:o}=n.getBoundingClientRect(),a=e-o-160;this.maxHeight=a<t?t:a,this.haveSetTbMaxHeight=!0}else e&&(this.maxHeight=e);t&&(this.showTable=!0)}}},ei=ti,ii=(i("45f9"),gt(ei,Je,Ze,!1,null,"0e13f56e",null)),ni=ii.exports;ni.install=function(t){t.component(ni.name,ni)};var oi=ni,ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sp-contextmenu"},[i("div",{on:{contextmenu:t.onContextmenu}},[t._t("default")],2),i("ul",{staticClass:"sp-contextmenu-menu",style:t.contextmenuStyle},t._l(t.menus,(function(e,n){return i("li",{key:n,staticClass:"sp-contextmenu-item",on:{click:function(i){return t.onSelectMenu(e.name)}}},[e.iconClass?i("i",{class:e.iconClass}):t._e(),i("span",{staticClass:"sp-contextmenu-name"},[t._v(t._s(e.name))])])})),0)])},li=[],ri={name:"sp-contextmenu",props:{menus:{type:Array,default:function(){return[{iconClass:"el-icon-delete",name:"删除"}]}},taregtSelectors:{type:String,default:""}},data(){return{contextmenuStyle:{},triggerClassName:"sp-contextmenu-trigger",selectTarget:null}},destroyed(){this.hideContextmenu()},methods:{handleEvent(t){switch(t.type){case"click":this.onClick(t);break;default:break}},onContextmenu(t){t.preventDefault(),t.stopPropagation(),this.selectTarget=this.getSelectorTarget(t),this.selectTarget&&(this.selectTarget.className=this.selectTarget.className+" "+this.triggerClassName,this.contextmenuStyle={display:"block",top:t.clientY-20+"px",left:t.clientX-5+"px"},document.addEventListener("click",this))},onClick(t){const e=this.$el.querySelector(".sp-contextmenu-menu");e.contains(t.target)||this.hideContextmenu()},hideContextmenu(){this.contextmenuStyle={display:"none"},this.selectTarget&&(this.selectTarget.className=this.selectTarget.className.replace(" "+this.triggerClassName,"")),document.removeEventListener("click",this)},onSelectMenu(t){this.hideContextmenu(),this.$emit("select",t,this.selectTarget)},getSelectorTarget(t){if(!this.taregtSelectors)return t.target;const e=this.$el.querySelectorAll(this.taregtSelectors);if(e)for(let i=0;i<e.length;i++)if(e[i].contains(t.target))return e[i];return null}}},si=ri,ci=(i("718d"),gt(si,ai,li,!1,null,null,null)),pi=ci.exports;pi.install=function(t){t.component(pi.name,pi)};var ui=pi,di=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-wrap"},[n("div",{staticClass:"empty-inner"},[n("img",{staticClass:"circular",attrs:{src:i("4a38"),alt:t.title}}),n("p",{staticClass:"empty-tips"},[t._v(t._s(t.title))])])])},hi=[],mi={name:"sp-empty",props:{title:{type:String,default:"没有数据～"}}},fi=mi,bi=(i("5919"),gt(fi,di,hi,!1,null,"55ab70e7",null)),gi=bi.exports;gi.install=function(t){t.component(gi.name,gi)};var yi=gi,Ai={inserted:function(t,e,i){const{value:n,arg:o}=e;let a=n;if("function"===typeof n&&(a=n()),t&&!1!==a){let e=t;if(a&&(e=t.querySelector(a)),e){const{clientHeight:t}=ge(),{top:n}=e.getBoundingClientRect(),a=isNaN(o)?0:Number(o),l=t-n-a;i.set("maxHeight",l)}}}};i("6800");const vi=[xe,Be,Zt,re,me,Ne,Xe,Ot,oi,vt,Mt,ui,yi,Re],wi={visibleHeight:Ai},xi=function(t,e={}){vi.forEach(i=>{t.component(i.name,{extends:i,data(){return{useOptions:e}}})});for(const i in wi)t.directive(i,wi[i])};"undefined"!==typeof window&&window.Vue&&xi(window.Vue);var Ci={install:xi};e["default"]=Ci}})}));
//# sourceMappingURL=spelement-ui.umd.min.js.map